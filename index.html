<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FWWB India - Integrated Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #f8f9fa;
            color: #212529;
        }

        /* Screen Container */
        .screen {
            display: none;
        }

        .screen.active {
            display: block;
        }

        /* Login Screen */
        .login-wrapper {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #2E3192 0%, #1BADE3 100%);
        }

        .login-box {
            background: white;
            padding: 40px;
            border-radius: 12px;
            width: 100%;
            max-width: 480px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .logo-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-container h1 {
            color: #2E3192;
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .logo-container p {
            color: #1BADE3;
            font-size: 14px;
            font-weight: 500;
        }

        .login-box h2 {
            color: #2d3748;
            font-size: 24px;
            margin-bottom: 8px;
            text-align: center;
        }

        .login-box .subtitle {
            color: #718096;
            font-size: 14px;
            text-align: center;
            margin-bottom: 32px;
        }

        .user-type-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .user-type-card {
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .user-type-card:hover {
            border-color: #2E3192;
            background: #f7fafc;
            transform: translateY(-2px);
        }

        .user-type-card.selected {
            border-color: #2E3192;
            background: #EEF2FF;
        }

        .user-type-card h3 {
            font-size: 14px;
            color: #2d3748;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .user-type-card p {
            font-size: 11px;
            color: #718096;
            margin: 0;
        }

        /* Main Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #2E3192 0%, #1e2266 100%);
            color: white;
            flex-shrink: 0;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }

        .sidebar-header {
            padding: 24px 16px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
        }

        .sidebar-header h2 {
            font-size: 18px;
            font-weight: 700;
            color: white;
        }

        .sidebar-header .org-name {
            font-size: 13px;
            color: #1BADE3;
            margin-top: 4px;
            font-weight: 500;
        }

        .sidebar-header .user-badge {
            font-size: 11px;
            color: #cbd5e0;
            margin-top: 8px;
            padding: 4px 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            display: inline-block;
        }

        .nav-menu {
            padding: 16px 0;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            padding: 8px 16px;
            font-size: 11px;
            color: #a0aec0;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-item {
            padding: 12px 16px;
            cursor: pointer;
            color: #e2e8f0;
            font-size: 14px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            color: white;
            padding-left: 20px;
        }

        .nav-item.active {
            background: rgba(27, 173, 227, 0.2);
            color: white;
            border-left: 4px solid #1BADE3;
            font-weight: 600;
        }

        .nav-icon {
            font-size: 16px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-left: 260px;
        }

        .topbar {
            background: white;
            border-bottom: 2px solid #e2e8f0;
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .topbar h1 {
            font-size: 22px;
            font-weight: 700;
            color: #2E3192;
        }

        .topbar-actions {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 20px;
            color: #718096;
            transition: color 0.2s;
        }

        .notification-bell:hover {
            color: #2E3192;
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #e53e3e;
            color: white;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-info .badge {
            background: #EEF2FF;
            color: #2E3192;
            padding: 6px 14px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
        }

        .user-info .name {
            color: #4a5568;
            font-size: 14px;
            font-weight: 500;
        }

        .logout-btn {
            background: #fee;
            color: #e53e3e;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            background: #fdd;
        }

        .content {
            padding: 32px;
            overflow-y: auto;
            flex: 1;
        }

        /* Breadcrumb */
        .breadcrumb {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 24px;
            font-size: 13px;
            color: #718096;
        }

        .breadcrumb a {
            color: #2E3192;
            text-decoration: none;
            font-weight: 500;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
        }

        .form-group label .required {
            color: #e53e3e;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2E3192;
            box-shadow: 0 0 0 3px rgba(46, 49, 146, 0.1);
        }

        .form-group input:disabled {
            background: #f7fafc;
            cursor: not-allowed;
            color: #718096;
        }

        .form-group .helper-text {
            font-size: 12px;
            color: #718096;
            margin-top: 4px;
        }

        /* File Upload */
        .file-upload-area {
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 32px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: #f7fafc;
        }

        .file-upload-area:hover {
            border-color: #2E3192;
            background: #eef2ff;
        }

        .file-upload-area input[type="file"] {
            display: none;
        }

        .file-upload-icon {
            font-size: 48px;
            color: #cbd5e0;
            margin-bottom: 12px;
        }

        .uploaded-files {
            margin-top: 16px;
        }

        .uploaded-file {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            margin-top: 8px;
            font-size: 13px;
        }

        .uploaded-file .file-name {
            color: #2d3748;
            font-weight: 500;
        }

        .uploaded-file .remove-file {
            color: #e53e3e;
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
        }

        /* Buttons */
        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.3px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-primary {
            background: linear-gradient(135deg, #2E3192 0%, #252b7a 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(46, 49, 146, 0.2), 0 1px 2px rgba(46, 49, 146, 0.1);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #252b7a 0%, #1e2266 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(46, 49, 146, 0.3), 0 2px 4px rgba(46, 49, 146, 0.2);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            color: #4a5568;
            border: 1px solid #e2e8f0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%);
            border-color: #cbd5e0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-success {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(72, 187, 120, 0.2), 0 1px 2px rgba(72, 187, 120, 0.1);
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(72, 187, 120, 0.3), 0 2px 4px rgba(72, 187, 120, 0.2);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(245, 101, 101, 0.2), 0 1px 2px rgba(245, 101, 101, 0.1);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(245, 101, 101, 0.3), 0 2px 4px rgba(245, 101, 101, 0.2);
        }

        .btn-info {
            background: linear-gradient(135deg, #1BADE3 0%, #1599c9 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(27, 173, 227, 0.2), 0 1px 2px rgba(27, 173, 227, 0.1);
        }

        .btn-info:hover {
            background: linear-gradient(135deg, #1599c9 0%, #0e7ca8 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(27, 173, 227, 0.3), 0 2px 4px rgba(27, 173, 227, 0.2);
        }

        .btn-full {
            width: 100%;
            justify-content: center;
        }

        .btn-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 24px;
            border: 1px solid #e2e8f0;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            color: #2E3192;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        /* Alert Boxes */
        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: flex;
            align-items: start;
            gap: 12px;
        }

        .alert-icon {
            font-size: 20px;
        }

        .alert-success {
            background: #c6f6d5;
            color: #22543d;
            border-left: 4px solid #48bb78;
        }

        .alert-warning {
            background: #feebc8;
            color: #744210;
            border-left: 4px solid #ed8936;
        }

        .alert-danger {
            background: #fed7d7;
            color: #742a2a;
            border-left: 4px solid #f56565;
        }

        .alert-info {
            background: #bee3f8;
            color: #2c5282;
            border-left: 4px solid #1BADE3;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-left: 4px solid #2E3192;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.12);
        }

        .stat-card.info {
            border-left-color: #1BADE3;
        }

        .stat-card.success {
            border-left-color: #48bb78;
        }

        .stat-card.warning {
            border-left-color: #ed8936;
        }

        .stat-card.danger {
            border-left-color: #f56565;
        }

        .stat-label {
            font-size: 13px;
            color: #718096;
            margin-bottom: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 4px;
        }

        .stat-trend {
            font-size: 12px;
            color: #48bb78;
            font-weight: 600;
        }

        .stat-trend.down {
            color: #e53e3e;
        }

        /* Form Grid */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Table */
        .table-container {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }

        .table-header {
            padding: 20px 24px;
            background: #f7fafc;
            border-bottom: 2px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-header h3 {
            font-size: 16px;
            font-weight: 700;
            color: #2d3748;
        }

        .table-actions {
            display: flex;
            gap: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: #f7fafc;
        }

        th {
            padding: 14px 16px;
            text-align: left;
            font-size: 13px;
            font-weight: 700;
            color: #4a5568;
            border-bottom: 2px solid #e2e8f0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        td {
            padding: 14px 16px;
            font-size: 14px;
            border-bottom: 1px solid #f7fafc;
        }

        tbody tr {
            transition: background 0.2s;
        }

        tbody tr:hover {
            background: #f7fafc;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-active, .status-approved, .status-completed {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-pending {
            background: #feebc8;
            color: #744210;
        }

        .status-rejected, .status-overdue {
            background: #fed7d7;
            color: #742a2a;
        }

        .status-draft {
            background: #e2e8f0;
            color: #4a5568;
        }

        .action-links {
            display: flex;
            gap: 12px;
        }

        .action-link {
            color: #2E3192;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            text-decoration: none;
        }

        .action-link:hover {
            text-decoration: underline;
        }

        .action-link.danger {
            color: #e53e3e;
        }

        /* Search Bar */
        .search-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 11px 16px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: #2E3192;
            box-shadow: 0 0 0 3px rgba(46, 49, 146, 0.1);
        }

        .filter-select {
            padding: 11px 16px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 14px;
            min-width: 150px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 4px;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 24px;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #718096;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }

        .tab:hover {
            color: #2E3192;
        }

        .tab.active {
            color: #2E3192;
            border-bottom-color: #2E3192;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 32px;
            max-width: 700px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e2e8f0;
        }

        .modal-header h2 {
            font-size: 20px;
            font-weight: 700;
            color: #2E3192;
        }

        .modal-close {
            font-size: 28px;
            color: #718096;
            cursor: pointer;
            line-height: 1;
        }

        .modal-close:hover {
            color: #e53e3e;
        }

        /* Progress Bar */
        .progress-container {
            margin-bottom: 20px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
            color: #4a5568;
            font-weight: 600;
        }

        .progress-bar {
            height: 10px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2E3192 0%, #1BADE3 100%);
            transition: width 0.3s;
        }

        /* Dashboard Widgets */
        .widget-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .widget {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid #e2e8f0;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .widget-title {
            font-size: 14px;
            font-weight: 700;
            color: #4a5568;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .widget-icon {
            font-size: 24px;
            color: #2E3192;
        }

        .widget-value {
            font-size: 28px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .widget-subtitle {
            font-size: 12px;
            color: #718096;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e2e8f0;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 24px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 4px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #2E3192;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #2E3192;
        }

        .timeline-date {
            font-size: 12px;
            color: #718096;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .timeline-content {
            background: #f7fafc;
            padding: 12px;
            border-radius: 6px;
            font-size: 13px;
        }

        /* Checkbox and Radio */
        .checkbox-group, .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-label, .radio-label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-size: 14px;
        }

        input[type="checkbox"], input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* Pagination */
        .pagination {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 24px;
        }

        .page-btn {
            padding: 8px 14px;
            border: 1px solid #cbd5e0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
            transition: all 0.2s;
        }

        .page-btn:hover {
            background: #f7fafc;
            border-color: #2E3192;
        }

        .page-btn.active {
            background: #2E3192;
            color: white;
            border-color: #2E3192;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 200px;
            }

            .topbar h1 {
                font-size: 18px;
            }

            .content {
                padding: 16px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .sidebar {
                display: none;
            }
        }

        /* Loading Spinner */
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2E3192;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-state-icon {
            font-size: 64px;
            color: #cbd5e0;
            margin-bottom: 16px;
        }

        .empty-state h3 {
            font-size: 18px;
            color: #4a5568;
            margin-bottom: 8px;
        }

        .empty-state p {
            color: #718096;
            font-size: 14px;
        }

        /* GPS Location Button */
        .gps-btn {
            background: #48bb78;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .gps-btn:hover {
            background: #38a169;
        }

        /* Calendar View */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 16px;
        }

        .calendar-day {
            padding: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
        }

        .calendar-day:hover {
            background: #f7fafc;
        }

        .calendar-day.present {
            background: #c6f6d5;
        }

        .calendar-day.absent {
            background: #fed7d7;
        }

        .calendar-day.leave {
            background: #feebc8;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-container {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #2E3192 0%, #1BADE3 100%);
            color: white;
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 20px;
            font-weight: 600;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-body {
            padding: 24px;
            max-height: calc(90vh - 140px);
            overflow-y: auto;
        }

        .modal-footer {
            padding: 16px 24px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2d3748;
            font-size: 14px;
        }

        .form-group label.required::after {
            content: ' *';
            color: #e53e3e;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-control:focus {
            outline: none;
            border-color: #2E3192;
            box-shadow: 0 0 0 3px rgba(46, 49, 146, 0.1);
        }

        textarea.form-control {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .form-info {
            background: #f7fafc;
            border-left: 4px solid #1BADE3;
            padding: 12px 16px;
            margin-bottom: 20px;
            border-radius: 4px;
            font-size: 14px;
            color: #2d3748;
        }

        .form-section-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin: 24px 0 16px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #e2e8f0;
        }

        .form-section-title:first-child {
            margin-top: 0;
        }

        .file-upload-area {
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-upload-area:hover {
            border-color: #2E3192;
            background: #f7fafc;
        }

        .file-upload-area input[type="file"] {
            display: none;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-group label {
            margin: 0;
            cursor: pointer;
            font-weight: 400;
        }
    </style>
</head>
<body>

    <!-- ============================================ -->
    <!-- LOGIN SCREEN -->
    <!-- ============================================ -->
    <div class="screen active" id="screen-login">
        <div class="login-wrapper">
            <div class="login-box">
                <div class="logo-container">
                    <h1>FWWB India</h1>
                    <p>Friends of Women's World Banking</p>
                    <p style="font-size: 12px; color: #718096; margin-top: 8px;">Empowering Millions of Indian Women</p>
                </div>

                <h2>Welcome Back</h2>
                <p class="subtitle">Select your role and sign in to continue</p>
                <p style="font-size: 10px; color: #1BADE3; text-align: center; margin: -8px 0 16px 0;">✓ v2.0 Latest (27-Dec-2024)</p>

                <div class="user-type-selector" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="user-type-card" onclick="selectUserType('management', this)">
                        <h3>Management</h3>
                        <p>Full Access</p>
                    </div>
                    <div class="user-type-card" onclick="selectUserType('program', this)">
                        <h3>Program Team</h3>
                        <p>Field & Programs</p>
                    </div>
                    <div class="user-type-card" onclick="selectUserType('hr', this)">
                        <h3>HR Team</h3>
                        <p>People & Culture</p>
                    </div>
                    <div class="user-type-card" onclick="selectUserType('admin', this)">
                        <h3>Admin Team</h3>
                        <p>Operations</p>
                    </div>
                    <div class="user-type-card" onclick="selectUserType('employee', this)">
                        <h3>Employee</h3>
                        <p>Self Service</p>
                    </div>
                </div>

                <div class="form-group">
                    <label>Username <span class="required">*</span></label>
                    <input type="text" id="username" placeholder="Enter your username">
                </div>

                <div class="form-group">
                    <label>Password <span class="required">*</span></label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>

                <button class="btn btn-primary btn-full" onclick="login()">
                    Sign In
                </button>

                <p style="margin-top: 20px; text-align: center; font-size: 12px; color: #718096;">
                    101, Sakar-I, Opp. Gandhigram Railway Station<br>
                    Ashram Road, Ahmedabad 380 009, Gujarat, India
                </p>
            </div>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- DASHBOARD SCREEN -->
    <!-- ============================================ -->
    <div class="screen" id="screen-dashboard">
        <div class="app-container">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h2>FWWB India</h2>
                    <div class="org-name">Integrated Management System</div>
                    <div class="user-badge" id="userRole">Management</div>
                </div>
                <nav class="nav-menu">
                    <div class="nav-section">
                        <div class="nav-section-title">Main</div>
                        <div class="nav-item active" onclick="goToScreen('dashboard')">
                            <span class="nav-icon">■</span> Dashboard
                        </div>
                    </div>
                    <div class="nav-section">
                        <div class="nav-section-title">Program Management</div>
                        <div class="nav-item" onclick="goToScreen('activities')">
                            <span class="nav-icon">▪</span> Activities
                        </div>
                        <div class="nav-item" onclick="goToScreen('budget')">
                            <span class="nav-icon">▪</span> Budget Management
                        </div>
                        <div class="nav-item" onclick="goToScreen('expenses')">
                            <span class="nav-icon">▪</span> Expenses & Bills
                        </div>
                        <div class="nav-item" onclick="goToScreen('monitoring')">
                            <span class="nav-icon">▪</span> Monitoring & Data
                        </div>
                        <div class="nav-item" onclick="goToScreen('reports')">
                            <span class="nav-icon">▪</span> Reports
                        </div>
                    </div>
                    <div class="nav-section">
                        <div class="nav-section-title">HRMS</div>
                        <div class="nav-item" onclick="goToScreen('recruitment')">
                            <span class="nav-icon">▪</span> Recruitment
                        </div>
                        <div class="nav-item" onclick="goToScreen('employees')">
                            <span class="nav-icon">▪</span> Employees
                        </div>
                        <div class="nav-item" onclick="goToScreen('attendance')">
                            <span class="nav-icon">▪</span> Attendance
                        </div>
                        <div class="nav-item" onclick="goToScreen('leave')">
                            <span class="nav-icon">▪</span> Leave Management
                        </div>
                        <div class="nav-item" onclick="goToScreen('performance')">
                            <span class="nav-icon">▪</span> Performance
                        </div>
                        <div class="nav-item" onclick="goToScreen('payroll')">
                            <span class="nav-icon">▪</span> Payroll
                        </div>
                        <div class="nav-item" onclick="goToScreen('ess')">
                            <span class="nav-icon">▪</span> Employee Self Service
                        </div>
                    </div>
                    <div class="nav-section">
                        <div class="nav-section-title">Administration</div>
                        <div class="nav-item" onclick="goToScreen('assets')">
                            <span class="nav-icon">▪</span> Asset Management
                        </div>
                        <div class="nav-item" onclick="goToScreen('insurance')">
                            <span class="nav-icon">▪</span> Insurance
                        </div>
                        <div class="nav-item" onclick="goToScreen('travel')">
                            <span class="nav-icon">▪</span> Travel Booking
                        </div>
                        <div class="nav-item" onclick="goToScreen('stationery')">
                            <span class="nav-icon">▪</span> Stationery
                        </div>
                        <div class="nav-item" onclick="goToScreen('admin-expenses')">
                            <span class="nav-icon">▪</span> Admin Expenses
                        </div>
                    </div>
                </nav>
            </aside>

            <main class="main-content">
                <div class="topbar">
                    <h1>Dashboard Overview</h1>
                    <div class="topbar-actions">
                        <div class="notification-bell" onclick="showNotifications()">
                            <span style="font-size: 16px;">●</span>
                            <span class="notification-badge">10</span>
                        </div>
                        <div class="user-info">
                            <span class="name" id="userName">Admin User</span>
                            <span class="badge" id="userBadge">Management</span>
                        </div>
                        <button class="logout-btn" onclick="logout()">Logout</button>
                    </div>
                </div>

                <div class="content">
                    <div class="breadcrumb">
                        <a href="#" onclick="goToScreen('dashboard')">Home</a>
                        <span>/</span>
                        <span>Dashboard</span>
                    </div>

                    <div class="alert alert-info">
                        <span class="alert-icon">●</span>
                        <div>
                            <strong>Welcome to FWWB Integrated Management System</strong><br>
                            Empowering Millions of Indian Women through efficient program, HR, and administrative management.
                        </div>
                    </div>

                    <!-- Stats Overview -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Active Projects</div>
                            <div class="stat-value">24</div>
                            <div class="stat-trend">↑ 12% from last quarter</div>
                        </div>
                        <div class="stat-card info">
                            <div class="stat-label">Total Employees</div>
                            <div class="stat-value">156</div>
                            <div class="stat-trend">↑ 8 new hires this month</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Budget Utilization</div>
                            <div class="stat-value">67%</div>
                            <div class="stat-trend">On track for FY 2024-25</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Pending Approvals</div>
                            <div class="stat-value">15</div>
                            <div class="stat-trend">5 overdue items</div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card">
                        <div class="card-title">Quick Actions</div>
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="goToScreen('activities')">
                                + New Activity
                            </button>
                            <button class="btn btn-info" onclick="goToScreen('expenses')">
                                ↑ Submit Expense
                            </button>
                            <button class="btn btn-success" onclick="goToScreen('employees')">
                                + Add Employee
                            </button>
                            <button class="btn btn-secondary" onclick="goToScreen('reports')">
                                ■ Generate Report
                            </button>
                        </div>
                    </div>

                    <!-- Dashboard Grid -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 24px;">
                        <div class="card">
                            <div class="card-title">Recent Activities</div>
                            <div class="timeline">
                                <div class="timeline-item">
                                    <div class="timeline-date">Today, 2:30 PM</div>
                                    <div class="timeline-content">
                                        <strong>Budget Approved</strong> - Women Entrepreneurship Program budget approved
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-date">Today, 11:15 AM</div>
                                    <div class="timeline-content">
                                        <strong>New Employee</strong> - Priya Sharma joined as Program Manager
                                    </div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-date">Yesterday, 4:45 PM</div>
                                    <div class="timeline-content">
                                        <strong>Field Data Submitted</strong> - 150 beneficiary records uploaded
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-title">Upcoming Renewals & Alerts</div>
                            <div class="alert alert-warning">
                                <span class="alert-icon">●</span>
                                <div>
                                    <strong>Medical Insurance</strong><br>
                                    Expires in 15 days - Action required
                                </div>
                            </div>
                            <div class="alert alert-warning">
                                <span class="alert-icon">●</span>
                                <div>
                                    <strong>Vehicle Insurance (GJ-01-AB-1234)</strong><br>
                                    Expires in 22 days
                                </div>
                            </div>
                            <div class="alert alert-info">
                                <span class="alert-icon">●</span>
                                <div>
                                    <strong>Laptop Warranty (LP-2023-045)</strong><br>
                                    Expires in 45 days
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Program Impact Overview -->
                    <div class="card">
                        <div class="card-title">Program Impact (FY 2024-25)</div>
                        <div class="stats-grid">
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Women Reached</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">2.5M+</div>
                                <div class="widget-subtitle">Across all programs</div>
                            </div>
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Micro-Credit Disbursed</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">₹125Cr</div>
                                <div class="widget-subtitle">Through partner MFIs</div>
                            </div>
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Training Sessions</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">450+</div>
                                <div class="widget-subtitle">Capacity building initiatives</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Due to the massive size requirement (20 screens), I'll create a comprehensive system -->
    <!-- Creating a placeholder that generates screens dynamically to keep file manageable -->
    <!-- All 19 additional screens will be referenced here and generated via JavaScript -->

    <script>
        // Screen Templates - This will dynamically generate all screens
        const screenTemplates = {
            activities: {
                title: 'Activity Management',
                content: generateActivityScreen
            },
            budget: {
                title: 'Budget Management',
                content: generateBudgetScreen
            },
            expenses: {
                title: 'Expenses & Bill Settlement',
                content: generateExpensesScreen
            },
            monitoring: {
                title: 'Monitoring & Data Collection',
                content: generateMonitoringScreen
            },
            reports: {
                title: 'Reports & Dashboards',
                content: generateReportsScreen
            },
            recruitment: {
                title: 'Recruitment',
                content: generateRecruitmentScreen
            },
            employees: {
                title: 'Employee Management',
                content: generateEmployeesScreen
            },
            attendance: {
                title: 'Attendance Management',
                content: generateAttendanceScreen
            },
            leave: {
                title: 'Leave Management',
                content: generateLeaveScreen
            },
            performance: {
                title: 'Performance Management',
                content: generatePerformanceScreen
            },
            payroll: {
                title: 'Payroll Management',
                content: generatePayrollScreen
            },
            ess: {
                title: 'Employee Self Service',
                content: generateESSScreen
            },
            assets: {
                title: 'Asset Management',
                content: generateAssetsScreen
            },
            insurance: {
                title: 'Insurance Management',
                content: generateInsuranceScreen
            },
            travel: {
                title: 'Travel Booking',
                content: generateTravelScreen
            },
            stationery: {
                title: 'Stationery Request',
                content: generateStationeryScreen
            },
            'admin-expenses': {
                title: 'Admin Expenses',
                content: generateAdminExpensesScreen
            }
        };

        // Generate sidebar navigation
        function generateSidebar(activeScreen = '') {
            const userType = selectedUserType;
            const permissions = rolePermissions[userType] || [];

            // Module definitions with cleaner icons
            const modules = {
                dashboard: { section: 'main', label: 'Dashboard', icon: '■' },
                activities: { section: 'program', label: 'Activities', icon: '▪' },
                budget: { section: 'program', label: 'Budget', icon: '▪' },
                expenses: { section: 'program', label: 'Expenses & Bills', icon: '▪' },
                monitoring: { section: 'program', label: 'Monitoring', icon: '▪' },
                reports: { section: 'program', label: 'Reports', icon: '▪' },
                recruitment: { section: 'hrms', label: 'Recruitment', icon: '▪' },
                employees: { section: 'hrms', label: 'Employees', icon: '▪' },
                attendance: { section: 'hrms', label: 'Attendance', icon: '▪' },
                leave: { section: 'hrms', label: 'Leave', icon: '▪' },
                performance: { section: 'hrms', label: 'Performance', icon: '▪' },
                payroll: { section: 'hrms', label: 'Payroll', icon: '▪' },
                ess: { section: 'hrms', label: 'Self Service', icon: '▪' },
                assets: { section: 'admin', label: 'Assets', icon: '▪' },
                insurance: { section: 'admin', label: 'Insurance', icon: '▪' },
                travel: { section: 'admin', label: 'Travel', icon: '▪' },
                stationery: { section: 'admin', label: 'Stationery', icon: '▪' },
                'admin-expenses': { section: 'admin', label: 'Admin Expenses', icon: '▪' }
            };

            // Group modules by section
            const sections = {
                main: { title: 'Main', modules: [] },
                program: { title: 'Program Management', modules: [] },
                hrms: { title: 'HRMS', modules: [] },
                admin: { title: 'Administration', modules: [] }
            };

            // Filter and group modules based on permissions
            Object.keys(modules).forEach(key => {
                if (permissions.includes(key)) {
                    const module = modules[key];
                    sections[module.section].modules.push({ key, ...module });
                }
            });

            // Build sidebar HTML
            let sidebarHTML = `
                <aside class="sidebar">
                    <div class="sidebar-header">
                        <h2>FWWB India</h2>
                        <div class="org-name">Management System</div>
                        <div class="user-badge">${currentUser ? currentUser.role : 'User'}</div>
                    </div>
                    <nav class="nav-menu">
            `;

            // Add sections with modules
            Object.keys(sections).forEach(sectionKey => {
                const section = sections[sectionKey];
                if (section.modules.length > 0) {
                    sidebarHTML += `
                        <div class="nav-section">
                            <div class="nav-section-title">${section.title}</div>
                    `;
                    section.modules.forEach(module => {
                        sidebarHTML += `
                            <div class="nav-item ${activeScreen === module.key ? 'active' : ''}" onclick="goToScreen('${module.key}')">
                                <span class="nav-icon">${module.icon}</span> ${module.label}
                            </div>
                        `;
                    });
                    sidebarHTML += `</div>`;
                }
            });

            sidebarHTML += `
                    </nav>
                </aside>
            `;

            return sidebarHTML;
        }

        // Generate topbar
        function generateTopbar(title) {
            return `
                <div class="topbar">
                    <h1>${title}</h1>
                    <div class="topbar-actions">
                        <div class="notification-bell" onclick="showNotifications()">
                            <span style="font-size: 16px;">●</span>
                            <span class="notification-badge">10</span>
                        </div>
                        <div class="user-info">
                            <span class="name">${currentUser ? currentUser.name : 'User'}</span>
                            <span class="badge">${currentUser ? currentUser.role : 'Role'}</span>
                        </div>
                        <button class="logout-btn" onclick="logout()">Logout</button>
                    </div>
                </div>
            `;
        }

        // Screen generation functions
        function generateActivityScreen() {
            return `
                <div class="content">
                    <div class="breadcrumb">
                        <a href="#" onclick="goToScreen('dashboard')">Home</a>
                        <span>/</span>
                        <span>Activities</span>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Activities</div>
                            <div class="stat-value">156</div>
                            <div class="stat-trend">Across 24 projects</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Completed</div>
                            <div class="stat-value">89</div>
                            <div class="stat-trend">↑ 12 this month</div>
                        </div>
                        <div class="stat-card info">
                            <div class="stat-label">In Progress</div>
                            <div class="stat-value">45</div>
                            <div class="stat-trend">On schedule</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Delayed</div>
                            <div class="stat-value">8</div>
                            <div class="stat-trend">Needs attention</div>
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <button class="btn btn-primary" onclick="showAddActivityForm()">
                            + Add New Activity
                        </button>
                        <button class="btn btn-info" onclick="exportToExcel('activities')">
                            ↓ Export to Excel
                        </button>
                    </div>

                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="Search activities by name, project, or ID...">
                        <select class="filter-select">
                            <option>All Projects</option>
                            <option>Women Entrepreneurship</option>
                            <option>Financial Literacy</option>
                            <option>Microfinance Support</option>
                        </select>
                        <select class="filter-select">
                            <option>All Status</option>
                            <option>Planned</option>
                            <option>In Progress</option>
                            <option>Completed</option>
                            <option>Delayed</option>
                        </select>
                        <button class="btn btn-secondary">○ Search</button>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h3>Activity List</h3>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Activity ID</th>
                                    <th>Activity Name</th>
                                    <th>Project</th>
                                    <th>Budget</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Status</th>
                                    <th>Progress</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ACT-2024-001</td>
                                    <td>Community Training Workshop</td>
                                    <td>Women Entrepreneurship</td>
                                    <td>₹2,50,000</td>
                                    <td>15-Jan-2024</td>
                                    <td>30-Jan-2024</td>
                                    <td><span class="status-badge status-completed">Completed</span></td>
                                    <td>100%</td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewActivityDetails('ACT-2024-001')">View</a>
                                            <a class="action-link" onclick="editActivity('ACT-2024-001')">Edit</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>ACT-2024-002</td>
                                    <td>Financial Literacy Session</td>
                                    <td>Financial Literacy</td>
                                    <td>₹1,75,000</td>
                                    <td>01-Feb-2024</td>
                                    <td>15-Feb-2024</td>
                                    <td><span class="status-badge status-active">In Progress</span></td>
                                    <td>65%</td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewActivityDetails('ACT-2024-002')">View</a>
                                            <a class="action-link" onclick="editActivity('ACT-2024-002')">Edit</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>ACT-2024-003</td>
                                    <td>Microfinance Awareness Camp</td>
                                    <td>Microfinance Support</td>
                                    <td>₹3,20,000</td>
                                    <td>10-Feb-2024</td>
                                    <td>25-Feb-2024</td>
                                    <td><span class="status-badge status-active">In Progress</span></td>
                                    <td>45%</td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewActivityDetails('ACT-2024-003')">View</a>
                                            <a class="action-link" onclick="editActivity('ACT-2024-003')">Edit</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>ACT-2024-004</td>
                                    <td>Field Survey - Rural Areas</td>
                                    <td>Women Entrepreneurship</td>
                                    <td>₹1,50,000</td>
                                    <td>05-Feb-2024</td>
                                    <td>10-Feb-2024</td>
                                    <td><span class="status-badge status-overdue">Delayed</span></td>
                                    <td>30%</td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewActivityDetails('ACT-2024-004')">View</a>
                                            <a class="action-link" onclick="editActivity('ACT-2024-004')">Edit</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>ACT-2024-005</td>
                                    <td>Capacity Building Training</td>
                                    <td>Financial Literacy</td>
                                    <td>₹2,80,000</td>
                                    <td>20-Feb-2024</td>
                                    <td>05-Mar-2024</td>
                                    <td><span class="status-badge status-pending">Planned</span></td>
                                    <td>0%</td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewActivityDetails('ACT-2024-005')">View</a>
                                            <a class="action-link" onclick="editActivity('ACT-2024-005')">Edit</a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="pagination">
                        <button class="page-btn">« Previous</button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <button class="page-btn">Next »</button>
                    </div>
                </div>
            `;
        }

        function generateBudgetScreen() {
            return `
                <div class="content">
                    <div class="breadcrumb">
                        <a href="#" onclick="goToScreen('dashboard')">Home</a>
                        <span>/</span>
                        <span>Budget Management</span>
                    </div>

                    <div class="alert alert-warning">
                        <span class="alert-icon">●</span>
                        <div>
                            <strong>Budget Alert:</strong> 2 projects are approaching their budget limits (>85% utilization)
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Budget</div>
                            <div class="stat-value">₹1.2Cr</div>
                            <div class="stat-trend">FY 2024-25</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Utilized</div>
                            <div class="stat-value">₹80L</div>
                            <div class="stat-trend">67% of total</div>
                        </div>
                        <div class="stat-card info">
                            <div class="stat-label">Available</div>
                            <div class="stat-value">₹40L</div>
                            <div class="stat-trend">33% remaining</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Over-Budget Items</div>
                            <div class="stat-value">3</div>
                            <div class="stat-trend">Needs reallocation</div>
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <button class="btn btn-primary" onclick="showBudgetAllocationForm()">
                            + Allocate Budget
                        </button>
                        <button class="btn btn-info" onclick="generateReport('budget')">
                            ■ Budget Report
                        </button>
                        <button class="btn btn-secondary" onclick="exportToExcel('budget')">
                            ↓ Export Data
                        </button>
                    </div>

                    <div class="card">
                        <div class="card-title">Project-wise Budget Allocation</div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Women Entrepreneurship Program</span>
                                <span>₹35L / ₹50L (70%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 70%"></div>
                            </div>
                        </div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Financial Literacy Campaign</span>
                                <span>₹28L / ₹30L (93%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 93%; background: #ed8936;"></div>
                            </div>
                        </div>
                        <div class="progress-container">
                            <div class="progress-label">
                                <span>Microfinance Support Initiative</span>
                                <span>₹17L / ₹40L (42%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 42%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h3>Budget Details by Activity</h3>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Activity</th>
                                    <th>Project</th>
                                    <th>Budget Head</th>
                                    <th>Allocated</th>
                                    <th>Spent</th>
                                    <th>Balance</th>
                                    <th>Utilization</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Community Training</td>
                                    <td>Women Entrepreneurship</td>
                                    <td>Training & Workshops</td>
                                    <td>₹2,50,000</td>
                                    <td>₹2,45,000</td>
                                    <td>₹5,000</td>
                                    <td>98%</td>
                                    <td><span class="status-badge status-active">On Track</span></td>
                                </tr>
                                <tr>
                                    <td>Financial Literacy Session</td>
                                    <td>Financial Literacy</td>
                                    <td>Educational Materials</td>
                                    <td>₹1,75,000</td>
                                    <td>₹1,12,000</td>
                                    <td>₹63,000</td>
                                    <td>64%</td>
                                    <td><span class="status-badge status-active">On Track</span></td>
                                </tr>
                                <tr>
                                    <td>Field Survey</td>
                                    <td>Women Entrepreneurship</td>
                                    <td>Field Operations</td>
                                    <td>₹1,50,000</td>
                                    <td>₹1,58,000</td>
                                    <td>-₹8,000</td>
                                    <td>105%</td>
                                    <td><span class="status-badge status-overdue">Over Budget</span></td>
                                </tr>
                                <tr>
                                    <td>Awareness Camp</td>
                                    <td>Microfinance Support</td>
                                    <td>Events & Campaigns</td>
                                    <td>₹3,20,000</td>
                                    <td>₹1,44,000</td>
                                    <td>₹1,76,000</td>
                                    <td>45%</td>
                                    <td><span class="status-badge status-active">On Track</span></td>
                                </tr>
                                <tr>
                                    <td>Capacity Building</td>
                                    <td>Financial Literacy</td>
                                    <td>Training & Workshops</td>
                                    <td>₹2,80,000</td>
                                    <td>₹85,000</td>
                                    <td>₹1,95,000</td>
                                    <td>30%</td>
                                    <td><span class="status-badge status-active">On Track</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function generateExpensesScreen() {
            return `
                <div class="content">
                    <div class="breadcrumb">
                        <a href="#" onclick="goToScreen('dashboard')">Home</a>
                        <span>/</span>
                        <span>Expenses & Bill Settlement</span>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Expenses (This Month)</div>
                            <div class="stat-value">₹12.5L</div>
                            <div class="stat-trend">Across 89 bills</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Pending Approval</div>
                            <div class="stat-value">18</div>
                            <div class="stat-trend">₹3.2L worth</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Approved</div>
                            <div class="stat-value">45</div>
                            <div class="stat-trend">₹7.8L settled</div>
                        </div>
                        <div class="stat-card danger">
                            <div class="stat-label">Rejected</div>
                            <div class="stat-value">5</div>
                            <div class="stat-trend">Needs revision</div>
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <button class="btn btn-primary" onclick="showExpenseSubmissionForm()">
                            + Submit Expense
                        </button>
                        <button class="btn btn-info" onclick="bulkUpload('expenses')">
                            ↑ Bulk Upload
                        </button>
                        <button class="btn btn-secondary" onclick="exportToExcel('expenses')">
                            ↓ Export Report
                        </button>
                    </div>

                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="Search by expense ID, activity, or vendor...">
                        <select class="filter-select">
                            <option>All Status</option>
                            <option>Pending</option>
                            <option>Approved</option>
                            <option>Rejected</option>
                            <option>Settled</option>
                        </select>
                        <input type="date" class="filter-select">
                        <button class="btn btn-secondary">○ Search</button>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h3>Expense & Bill List</h3>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Expense ID</th>
                                    <th>Date</th>
                                    <th>Activity</th>
                                    <th>Budget Head</th>
                                    <th>Vendor/Description</th>
                                    <th>Amount</th>
                                    <th>Bills</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>EXP-2024-0156</td>
                                    <td>15-Dec-2024</td>
                                    <td>Training Workshop</td>
                                    <td>Venue & Catering</td>
                                    <td>ABC Hotel</td>
                                    <td>₹45,000</td>
                                    <td>●2 files</td>
                                    <td><span class="status-badge status-approved">Approved</span></td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewExpenseDetails(this.closest('tr').querySelector('td').textContent)">View</a>
                                            <a class="action-link" onclick="downloadExpenseBills(this.closest('tr').querySelector('td').textContent)">Download</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>EXP-2024-0157</td>
                                    <td>18-Dec-2024</td>
                                    <td>Field Survey</td>
                                    <td>Travel & TA/DA</td>
                                    <td>Travel Reimbursement</td>
                                    <td>₹12,500</td>
                                    <td>●5 files</td>
                                    <td><span class="status-badge status-pending">Pending</span></td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="approveExpense(this.closest('tr').querySelector('td').textContent)">Approve</a>
                                            <a class="action-link danger" onclick="rejectExpense(this.closest('tr').querySelector('td').textContent)">Reject</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>EXP-2024-0158</td>
                                    <td>20-Dec-2024</td>
                                    <td>Awareness Camp</td>
                                    <td>Printing & Materials</td>
                                    <td>XYZ Printers</td>
                                    <td>₹28,000</td>
                                    <td>●1 file</td>
                                    <td><span class="status-badge status-pending">Pending</span></td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="approveExpense(this.closest('tr').querySelector('td').textContent)">Approve</a>
                                            <a class="action-link danger" onclick="rejectExpense(this.closest('tr').querySelector('td').textContent)">Reject</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>EXP-2024-0159</td>
                                    <td>22-Dec-2024</td>
                                    <td>Capacity Building</td>
                                    <td>Training Materials</td>
                                    <td>DEF Stationery</td>
                                    <td>₹15,800</td>
                                    <td>●3 files</td>
                                    <td><span class="status-badge status-approved">Approved</span></td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewExpenseDetails(this.closest('tr').querySelector('td').textContent)">View</a>
                                            <a class="action-link" onclick="downloadExpenseBills(this.closest('tr').querySelector('td').textContent)">Download</a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>EXP-2024-0160</td>
                                    <td>24-Dec-2024</td>
                                    <td>Community Training</td>
                                    <td>Equipment Rental</td>
                                    <td>AV Equipment Hire</td>
                                    <td>₹8,500</td>
                                    <td>●2 files</td>
                                    <td><span class="status-badge status-rejected">Rejected</span></td>
                                    <td>
                                        <div class="action-links">
                                            <a class="action-link" onclick="viewRejectionReason(this.closest('tr').querySelector('td').textContent)">View</a>
                                            <a class="action-link" onclick="resubmitExpense(this.closest('tr').querySelector('td').textContent)">Resubmit</a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function generateMonitoringScreen() {
            return `
                <div class="content">
                    <div class="breadcrumb">
                        <a href="#" onclick="goToScreen('dashboard')">Home</a>
                        <span>/</span>
                        <span>Monitoring & Data Collection</span>
                    </div>

                    <div class="alert alert-info">
                        <span class="alert-icon">●</span>
                        <div>
                            <strong>Field Data Collection:</strong> Offline mode available for areas with poor connectivity. Data will sync automatically when online.
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Data Entries</div>
                            <div class="stat-value">12,580</div>
                            <div class="stat-trend">FY 2024-25</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Verified Entries</div>
                            <div class="stat-value">11,245</div>
                            <div class="stat-trend">89% verified</div>
                        </div>
                        <div class="stat-card info">
                            <div class="stat-label">Geo-Tagged Entries</div>
                            <div class="stat-value">9,850</div>
                            <div class="stat-trend">78% with location</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Pending Verification</div>
                            <div class="stat-value">1,335</div>
                            <div class="stat-trend">Needs review</div>
                        </div>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <button class="btn btn-primary" onclick="showFieldDataEntryForm()">
                            + New Field Entry
                        </button>
                        <button class="btn btn-success" onclick="captureGPSLocation('fieldGPS')">
                            ● Capture GPS Location
                        </button>
                        <button class="btn btn-info" onclick="bulkUpload('monitoring')">
                            ↑ Bulk Upload
                        </button>
                        <button class="btn btn-secondary" onclick="downloadOfflineApp()">
                            ↓ Offline App
                        </button>
                    </div>

                    <div class="card">
                        <div class="card-title">LFA Indicator Tracking</div>
                        <div class="table-container" style="box-shadow: none; border: none;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Indicator</th>
                                        <th>Objective</th>
                                        <th>Target</th>
                                        <th>Achieved</th>
                                        <th>Progress</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Women Trained</td>
                                        <td>Capacity Building</td>
                                        <td>5,000</td>
                                        <td>3,850</td>
                                        <td>77%</td>
                                        <td><span class="status-badge status-active">On Track</span></td>
                                    </tr>
                                    <tr>
                                        <td>Micro-Loans Disbursed</td>
                                        <td>Financial Access</td>
                                        <td>₹50Cr</td>
                                        <td>₹38Cr</td>
                                        <td>76%</td>
                                        <td><span class="status-badge status-active">On Track</span></td>
                                    </tr>
                                    <tr>
                                        <td>SHGs Formed</td>
                                        <td>Collective Action</td>
                                        <td>200</td>
                                        <td>145</td>
                                        <td>72%</td>
                                        <td><span class="status-badge status-active">On Track</span></td>
                                    </tr>
                                    <tr>
                                        <td>Businesses Supported</td>
                                        <td>Entrepreneurship</td>
                                        <td>1,000</td>
                                        <td>580</td>
                                        <td>58%</td>
                                        <td><span class="status-badge status-pending">Lagging</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Recent Field Data Submissions</div>
                        <div class="table-container" style="box-shadow: none; border: none;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Entry ID</th>
                                        <th>Date</th>
                                        <th>Activity</th>
                                        <th>Location</th>
                                        <th>Beneficiaries</th>
                                        <th>Photos</th>
                                        <th>GPS</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>FD-2024-0589</td>
                                        <td>25-Dec-2024</td>
                                        <td>SHG Formation</td>
                                        <td>Kheda District</td>
                                        <td>25</td>
                                        <td>📷 8</td>
                                        <td>✓ Yes</td>
                                        <td><span class="status-badge status-approved">Verified</span></td>
                                        <td>
                                            <div class="action-links">
                                                <a class="action-link" onclick="viewMonitoringData(this.closest('tr').querySelector('td').textContent)">View</a>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>FD-2024-0590</td>
                                        <td>26-Dec-2024</td>
                                        <td>Training Workshop</td>
                                        <td>Sabarkantha</td>
                                        <td>45</td>
                                        <td>📷 12</td>
                                        <td>✓ Yes</td>
                                        <td><span class="status-badge status-pending">Pending</span></td>
                                        <td>
                                            <div class="action-links">
                                                <a class="action-link" onclick="verifyMonitoringData(this.closest('tr').querySelector('td').textContent)">Verify</a>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>FD-2024-0591</td>
                                        <td>26-Dec-2024</td>
                                        <td>Business Assessment</td>
                                        <td>Mehsana</td>
                                        <td>18</td>
                                        <td>📷 5</td>
                                        <td>— No</td>
                                        <td><span class="status-badge status-pending">Pending</span></td>
                                        <td>
                                            <div class="action-links">
                                                <a class="action-link" onclick="verifyMonitoringData(this.closest('tr').querySelector('td').textContent)">Verify</a>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateReportsScreen() {
            return `
                <div class="content">
                    <div class="breadcrumb">
                        <a href="#" onclick="goToScreen('dashboard')">Home</a>
                        <span>/</span>
                        <span>Reports & Dashboards</span>
                    </div>

                    <div class="card">
                        <div class="card-title">Generate Reports</div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Report Type <span class="required">*</span></label>
                                <select>
                                    <option>Select Report Type</option>
                                    <option>Project-wise Summary</option>
                                    <option>Budget Utilization</option>
                                    <option>Activity Progress</option>
                                    <option>Expense Report</option>
                                    <option>Donor Report</option>
                                    <option>Beneficiary Report</option>
                                    <option>Impact Assessment</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Project</label>
                                <select>
                                    <option>All Projects</option>
                                    <option>Women Entrepreneurship</option>
                                    <option>Financial Literacy</option>
                                    <option>Microfinance Support</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Start Date</label>
                                <input type="date">
                            </div>
                            <div class="form-group">
                                <label>End Date</label>
                                <input type="date">
                            </div>
                            <div class="form-group">
                                <label>Donor (for donor reports)</label>
                                <select>
                                    <option>All Donors</option>
                                    <option>Donor A</option>
                                    <option>Donor B</option>
                                    <option>Government Grant</option>
                                    <option>Internal Funds</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Export Format <span class="required">*</span></label>
                                <select>
                                    <option>Excel (.xlsx)</option>
                                    <option>Word (.docx)</option>
                                    <option>PDF (.pdf)</option>
                                    <option>CSV (.csv)</option>
                                </select>
                            </div>
                        </div>
                        <div class="btn-group" style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="generateCustomReport()">
                                ■ Generate Report
                            </button>
                            <button class="btn btn-secondary" onclick="clearReportForm()">
                                Clear
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Quick Reports</div>
                        <div class="btn-group">
                            <button class="btn btn-info" onclick="generateQuickReport('monthly')">
                                ■ Current Month Summary
                            </button>
                            <button class="btn btn-info" onclick="generateQuickReport('quarterly')">
                                ■ Quarterly Report (Q3)
                            </button>
                            <button class="btn btn-info" onclick="generateQuickReport('annual')">
                                ■ Annual Report (FY 2024-25)
                            </button>
                            <button class="btn btn-info" onclick="generateQuickReport('impact')">
                                ■ Impact Dashboard
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Project Dashboards</div>
                        <div class="widget-grid">
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Women Entrepreneurship</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">78%</div>
                                <div class="widget-subtitle">Overall Progress</div>
                                <button class="btn btn-secondary btn-full" style="margin-top: 12px;" onclick="viewProjectDashboard('women-entrepreneurship')">
                                    View Dashboard
                                </button>
                            </div>
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Financial Literacy</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">82%</div>
                                <div class="widget-subtitle">Overall Progress</div>
                                <button class="btn btn-secondary btn-full" style="margin-top: 12px;" onclick="viewProjectDashboard('financial-literacy')">
                                    View Dashboard
                                </button>
                            </div>
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Microfinance Support</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">65%</div>
                                <div class="widget-subtitle">Overall Progress</div>
                                <button class="btn btn-secondary btn-full" style="margin-top: 12px;" onclick="viewProjectDashboard('microfinance')">
                                    View Dashboard
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-title">Recent Reports Generated</div>
                        <div class="table-container" style="box-shadow: none; border: none;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Report Name</th>
                                        <th>Type</th>
                                        <th>Generated On</th>
                                        <th>Generated By</th>
                                        <th>Format</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Q3 Progress Report 2024</td>
                                        <td>Quarterly Summary</td>
                                        <td>20-Dec-2024</td>
                                        <td>Admin User</td>
                                        <td>PDF</td>
                                        <td>
                                            <div class="action-links">
                                                <a class="action-link" onclick="downloadReport(this.closest('tr').querySelector('td').textContent || 'report')">Download</a>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Budget Utilization - November</td>
                                        <td>Budget Report</td>
                                        <td>01-Dec-2024</td>
                                        <td>Finance Manager</td>
                                        <td>Excel</td>
                                        <td>
                                            <div class="action-links">
                                                <a class="action-link" onclick="downloadReport(this.closest('tr').querySelector('td').textContent || 'report')">Download</a>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Donor Report - Donor A</td>
                                        <td>Donor Report</td>
                                        <td>15-Nov-2024</td>
                                        <td>Program Manager</td>
                                        <td>Word</td>
                                        <td>
                                            <div class="action-links">
                                                <a class="action-link" onclick="downloadReport(this.closest('tr').querySelector('td').textContent || 'report')">Download</a>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        // HRMS Screen Generation Functions
        function generateRecruitmentScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Recruitment</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Open Positions</div><div class="stat-value">8</div><div class="stat-trend">Across departments</div></div><div class="stat-card info"><div class="stat-label">Applications Received</div><div class="stat-value">145</div><div class="stat-trend">This month</div></div><div class="stat-card success"><div class="stat-label">Interviews Scheduled</div><div class="stat-value">22</div><div class="stat-trend">Next 2 weeks</div></div><div class="stat-card warning"><div class="stat-label">Offers Extended</div><div class="stat-value">5</div><div class="stat-trend">Awaiting response</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showCreateJobPostingForm()">+ New Job Posting</button><button class="btn btn-info" onclick="showViewApplicationsForm()">View Applications</button></div><div class="table-container"><div class="table-header"><h3>Open Positions</h3></div><table><thead><tr><th>Position</th><th>Department</th><th>Location</th><th>Posted On</th><th>Applications</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>Program Manager</td><td>Programs</td><td>Ahmedabad</td><td>10-Dec-2024</td><td>35</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewCandidateDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="showCreateJobPostingForm()">Edit</a></div></td></tr><tr><td>Field Officer</td><td>Programs</td><td>Gujarat (Multiple)</td><td>05-Dec-2024</td><td>58</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewCandidateDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="showCreateJobPostingForm()">Edit</a></div></td></tr><tr><td>Finance Manager</td><td>Finance</td><td>Ahmedabad</td><td>01-Dec-2024</td><td>28</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewCandidateDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="showCreateJobPostingForm()">Edit</a></div></td></tr></tbody></table></div></div>`;
        }

        function generateEmployeesScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Employee Management</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Total Employees</div><div class="stat-value">156</div><div class="stat-trend">As of today</div></div><div class="stat-card info"><div class="stat-label">Head Office</div><div class="stat-value">42</div><div class="stat-trend">Ahmedabad</div></div><div class="stat-card success"><div class="stat-label">Field Staff</div><div class="stat-value">114</div><div class="stat-trend">Multiple locations</div></div><div class="stat-card warning"><div class="stat-label">Probation Period</div><div class="stat-value">12</div><div class="stat-trend">Review pending</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showAddEmployeeForm()">+ Add Employee</button><button class="btn btn-info" onclick="showBulkUploadEmployeesForm()">Bulk Upload</button><button class="btn btn-secondary" onclick="exportToExcel('employees')">Export List</button></div><div class="search-bar"><input type="text" class="search-input" placeholder="Search by name, employee ID, or department..."><select class="filter-select"><option>All Departments</option><option>Programs</option><option>Finance</option><option>HR</option><option>Admin</option></select><select class="filter-select"><option>All Locations</option><option>Head Office</option><option>Field Staff</option></select><button class="btn btn-secondary">Search</button></div><div class="table-container"><div class="table-header"><h3>Employee Directory</h3></div><table><thead><tr><th>Emp ID</th><th>Name</th><th>Designation</th><th>Department</th><th>Location</th><th>Join Date</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>EMP-001</td><td>Priya Sharma</td><td>Program Manager</td><td>Programs</td><td>Ahmedabad</td><td>15-Jan-2020</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewEmployeeDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="editEmployee(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr><tr><td>EMP-042</td><td>Rahul Verma</td><td>Field Officer</td><td>Programs</td><td>Kheda</td><td>10-Mar-2021</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewEmployeeDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="editEmployee(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr><tr><td>EMP-089</td><td>Anjali Patel</td><td>Finance Manager</td><td>Finance</td><td>Ahmedabad</td><td>05-Jul-2022</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewEmployeeDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="editEmployee(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr><tr><td>EMP-145</td><td>Neha Desai</td><td>Program Officer</td><td>Programs</td><td>Ahmedabad</td><td>01-Nov-2024</td><td><span class="status-badge status-pending">Probation</span></td><td><div class="action-links"><a class="action-link" onclick="viewEmployeeDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="editEmployee(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr></tbody></table></div></div>`;
        }

        function generateAttendanceScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Attendance Management</span></div><div class="alert alert-info"><span class="alert-icon">●</span><div><strong>GPS-based Attendance:</strong> Field staff can mark attendance using GPS location from mobile app. Biometric attendance available for Head Office.</div></div><div class="stats-grid"><div class="stat-card success"><div class="stat-label">Present Today</div><div class="stat-value">148</div><div class="stat-trend">95% attendance</div></div><div class="stat-card warning"><div class="stat-label">Absent</div><div class="stat-value">5</div><div class="stat-trend">3% absent</div></div><div class="stat-card info"><div class="stat-label">On Leave</div><div class="stat-value">3</div><div class="stat-trend">2% on leave</div></div><div class="stat-card"><div class="stat-label">Half Day</div><div class="stat-value">2</div><div class="stat-trend">Partial attendance</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-success" onclick="alert('GPS Location captured!\\nLatitude: 23.0225\\nLongitude: 72.5714\\nTime: ' + new Date().toLocaleTimeString())">Mark Attendance (GPS)</button><button class="btn btn-primary" onclick="alert('Manual Attendance Entry\\n\\nIn production, this will:\\n● Select employee(s)\\n● Choose date\\n● Set check-in/out times\\n● Add notes/remarks\\n● Submit for approval\\n\\n[Opening manual entry form...]')">Manual Entry</button><button class="btn btn-info" onclick="generateReport('attendance')">Generate Report</button><button class="btn btn-secondary" onclick="exportToExcel('attendance')">Export Data</button></div><div class="card"><div class="card-title">Today's Attendance - ${new Date().toLocaleDateString()}</div><div class="search-bar"><input type="text" class="search-input" placeholder="Search by employee name or ID..."><select class="filter-select"><option>All Status</option><option>Present</option><option>Absent</option><option>Half Day</option><option>On Leave</option></select><button class="btn btn-secondary">Search</button></div><div class="table-container" style="box-shadow: none; border: none;"><table><thead><tr><th>Emp ID</th><th>Name</th><th>Department</th><th>Check In</th><th>Check Out</th><th>Location</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>EMP-001</td><td>Priya Sharma</td><td>Programs</td><td>09:15 AM</td><td>06:30 PM</td><td>HO - Ahmedabad</td><td><span class="status-badge status-active">Present</span></td><td><div class="action-links"><a class="action-link" onclick="viewAttendanceDetails(this.closest('tr').querySelector('td').textContent)">View</a></div></td></tr><tr><td>EMP-042</td><td>Rahul Verma</td><td>Programs</td><td>08:45 AM</td><td>05:15 PM</td><td>GPS: Kheda</td><td><span class="status-badge status-active">Present</span></td><td><div class="action-links"><a class="action-link" onclick="alert('GPS Location Details\\n\\nEmployee: ' + this.closest('tr').querySelector('td').textContent + '\\nLocation: Kheda, Gujarat\\nCoordinates: 23.0225, 72.5714\\nAccuracy: 15 meters\\nTimestamp: ' + new Date().toLocaleString() + '\\n\\n[View on map]')">View</a></div></td></tr><tr><td>EMP-089</td><td>Anjali Patel</td><td>Finance</td><td>09:30 AM</td><td>—</td><td>HO - Ahmedabad</td><td><span class="status-badge status-active">Present</span></td><td><div class="action-links"><a class="action-link" onclick="viewAttendanceDetails(this.closest('tr').querySelector('td').textContent)">View</a></div></td></tr><tr><td>EMP-025</td><td>Amit Shah</td><td>Admin</td><td>—</td><td>—</td><td>—</td><td><span class="status-badge status-overdue">Absent</span></td><td><div class="action-links"><a class="action-link" onclick="markAttendance(this.closest('tr').querySelector('td').textContent)">Mark</a></div></td></tr></tbody></table></div></div></div>`;
        }

        function generateLeaveScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Leave Management</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Leave Requests (Pending)</div><div class="stat-value">12</div><div class="stat-trend">Awaiting approval</div></div><div class="stat-card success"><div class="stat-label">Approved This Month</div><div class="stat-value">45</div><div class="stat-trend">December 2024</div></div><div class="stat-card warning"><div class="stat-label">On Leave Today</div><div class="stat-value">3</div><div class="stat-trend">Various departments</div></div><div class="stat-card info"><div class="stat-label">Avg Leave Balance</div><div class="stat-value">14.5</div><div class="stat-trend">Days per employee</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="applyLeave()">Apply Leave</button><button class="btn btn-info" onclick="showLeaveCalendar()">Leave Calendar</button><button class="btn btn-secondary" onclick="exportToExcel('leave')">Export Report</button></div><div class="table-container"><div class="table-header"><h3>Pending Leave Requests</h3></div><table><thead><tr><th>Emp ID</th><th>Employee Name</th><th>Leave Type</th><th>From Date</th><th>To Date</th><th>Days</th><th>Reason</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>EMP-056</td><td>Ritu Mehta</td><td>Casual Leave</td><td>28-Dec-2024</td><td>30-Dec-2024</td><td>3</td><td>Personal work</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="approveLeave(this.closest('tr').querySelector('td').textContent)">Approve</a><a class="action-link danger" onclick="rejectLeave(this.closest('tr').querySelector('td').textContent)">Reject</a></div></td></tr><tr><td>EMP-089</td><td>Sanjay Kumar</td><td>Sick Leave</td><td>27-Dec-2024</td><td>27-Dec-2024</td><td>1</td><td>Medical emergency</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="approveLeave(this.closest('tr').querySelector('td').textContent)">Approve</a><a class="action-link danger" onclick="rejectLeave(this.closest('tr').querySelector('td').textContent)">Reject</a></div></td></tr><tr><td>EMP-102</td><td>Meera Joshi</td><td>Privilege Leave</td><td>02-Jan-2025</td><td>05-Jan-2025</td><td>4</td><td>Family function</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="approveLeave(this.closest('tr').querySelector('td').textContent)">Approve</a><a class="action-link danger" onclick="rejectLeave(this.closest('tr').querySelector('td').textContent)">Reject</a></div></td></tr></tbody></table></div></div>`;
        }

        function generatePerformanceScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Performance Management</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Performance Reviews (Due)</div><div class="stat-value">25</div><div class="stat-trend">Q3 FY 2024-25</div></div><div class="stat-card success"><div class="stat-label">Completed Reviews</div><div class="stat-value">131</div><div class="stat-trend">84% completion</div></div><div class="stat-card info"><div class="stat-label">Performance Goals Set</div><div class="stat-value">156</div><div class="stat-trend">All employees</div></div><div class="stat-card warning"><div class="stat-label">Average Rating</div><div class="stat-value">3.8/5</div><div class="stat-trend">Above expectations</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showSetKPIsForm()">Set Goals</button><button class="btn btn-secondary" onclick="showPerformanceDashboard()">View Dashboard</button></div><div class="table-container"><div class="table-header"><h3>Pending Performance Reviews</h3></div><table><thead><tr><th>Emp ID</th><th>Employee Name</th><th>Designation</th><th>Review Period</th><th>Reviewer</th><th>Self Assessment</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>EMP-015</td><td>Kavita Singh</td><td>Program Officer</td><td>Q3 2024</td><td>Priya Sharma</td><td>Completed</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="conductReview(this.closest('tr').querySelector('td').textContent)">Review</a></div></td></tr><tr><td>EMP-067</td><td>Deepak Patel</td><td>Field Officer</td><td>Q3 2024</td><td>Rahul Verma</td><td>Pending</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="sendReminder(this.closest('tr').querySelector('td').textContent, 'self-assessment')">Remind</a></div></td></tr><tr><td>EMP-092</td><td>Asha Reddy</td><td>Finance Executive</td><td>Q3 2024</td><td>Anjali Patel</td><td>Completed</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="conductReview(this.closest('tr').querySelector('td').textContent)">Review</a></div></td></tr></tbody></table></div></div>`;
        }

        function generatePayrollScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Payroll Management</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Total Payroll (This Month)</div><div class="stat-value">₹85.6L</div><div class="stat-trend">December 2024</div></div><div class="stat-card success"><div class="stat-label">Payslips Generated</div><div class="stat-value">156</div><div class="stat-trend">100% processed</div></div><div class="stat-card info"><div class="stat-label">PF Contribution</div><div class="stat-value">₹8.2L</div><div class="stat-trend">Employer + Employee</div></div><div class="stat-card warning"><div class="stat-label">TDS Deducted</div><div class="stat-value">₹4.5L</div><div class="stat-trend">To be deposited</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showProcessPayrollForm()">Process Payroll</button><button class="btn btn-success" onclick="showGeneratePayslipsForm()">Generate Payslips</button><button class="btn btn-info" onclick="showStatutoryReportsForm()">Statutory Reports</button><button class="btn btn-secondary" onclick="exportToExcel('payroll')">Export Data</button></div><div class="card"><div class="card-title">Statutory Compliance Summary</div><div class="table-container" style="box-shadow: none; border: none;"><table><thead><tr><th>Component</th><th>Employees Covered</th><th>Amount (Dec 2024)</th><th>Due Date</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>PF (Provident Fund)</td><td>156</td><td>₹8,24,500</td><td>15-Jan-2025</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="generatePayrollChallan('PF')">Generate</a></div></td></tr><tr><td>ESIC</td><td>89</td><td>₹2,14,800</td><td>15-Jan-2025</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="generatePayrollChallan('ESIC')">Generate</a></div></td></tr><tr><td>TDS (Income Tax)</td><td>142</td><td>₹4,52,300</td><td>07-Jan-2025</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="generatePayrollChallan('TDS')">Generate</a></div></td></tr><tr><td>Professional Tax</td><td>156</td><td>₹31,200</td><td>31-Dec-2024</td><td><span class="status-badge status-approved">Paid</span></td><td><div class="action-links"><a class="action-link" onclick="viewPayrollReceipt('Professional Tax')">View</a></div></td></tr></tbody></table></div></div></div>`;
        }

        function generateESSScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Employee Self Service</span></div><div class="alert alert-info"><span class="alert-icon">●</span><div><strong>Employee Portal:</strong> Employees can view payslips, apply for leave, update profiles, and access company documents.</div></div><div class="widget-grid"><div class="widget"><div class="widget-header"><span class="widget-title">My Profile</span></div><div class="widget-value">Complete</div><div class="widget-subtitle">Last updated: 15-Nov-2024</div><button class="btn btn-secondary btn-full" style="margin-top: 12px;" onclick="showUpdateProfileForm()">Update Profile</button></div><div class="widget"><div class="widget-header"><span class="widget-title">Leave Balance</span></div><div class="widget-value">15.5</div><div class="widget-subtitle">Days remaining</div><button class="btn btn-secondary btn-full" style="margin-top: 12px;" onclick="applyLeave()">Apply Leave</button></div><div class="widget"><div class="widget-header"><span class="widget-title">Attendance</span></div><div class="widget-value">96%</div><div class="widget-subtitle">This month</div><button class="btn btn-secondary btn-full" style="margin-top: 12px;" onclick="showAttendanceDetailsForm()">View Details</button></div></div><div class="card"><div class="card-title">Quick Actions</div><div class="btn-group"><button class="btn btn-primary" onclick="downloadPayslip('December 2024')">Download Payslip</button><button class="btn btn-info" onclick="viewForm16()">View Form 16</button><button class="btn btn-success" onclick="applyLeave()">Apply Leave</button><button class="btn btn-secondary" onclick="raiseITTicket()">IT Support</button></div></div><div class="card"><div class="card-title">Recent Payslips</div><div class="table-container" style="box-shadow: none; border: none;"><table><thead><tr><th>Month</th><th>Gross Salary</th><th>Deductions</th><th>Net Salary</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>December 2024</td><td>₹55,000</td><td>₹8,250</td><td>₹46,750</td><td><span class="status-badge status-active">Processed</span></td><td><div class="action-links"><a class="action-link" onclick="downloadPayslip(this.closest('tr').querySelector('td').textContent)">Download</a></div></td></tr><tr><td>November 2024</td><td>₹55,000</td><td>₹8,250</td><td>₹46,750</td><td><span class="status-badge status-active">Processed</span></td><td><div class="action-links"><a class="action-link" onclick="downloadPayslip(this.closest('tr').querySelector('td').textContent)">Download</a></div></td></tr><tr><td>October 2024</td><td>₹55,000</td><td>₹8,250</td><td>₹46,750</td><td><span class="status-badge status-active">Processed</span></td><td><div class="action-links"><a class="action-link" onclick="downloadPayslip(this.closest('tr').querySelector('td').textContent)">Download</a></div></td></tr></tbody></table></div></div></div>`;
        }


        // ADMIN Screen Generation Functions
        function generateAssetsScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Asset Management</span></div><div class="tabs"><div class="tab active" onclick="switchTab(event, 'it-assets')">IT Assets</div><div class="tab" onclick="switchTab(event, 'non-it-assets')">Non-IT Assets</div></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Total Assets</div><div class="stat-value">245</div><div class="stat-trend">IT + Non-IT</div></div><div class="stat-card success"><div class="stat-label">Assigned</div><div class="stat-value">198</div><div class="stat-trend">Currently in use</div></div><div class="stat-card warning"><div class="stat-label">Warranty Expiring</div><div class="stat-value">12</div><div class="stat-trend">Next 30 days</div></div><div class="stat-card info"><div class="stat-label">Available</div><div class="stat-value">47</div><div class="stat-trend">In stock</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="alert('Add New Asset\\n\\nAsset details:\\n● Asset category\\n● Name & model\\n● Serial number\\n● Purchase details\\n● Warranty info\\n● Upload invoice\\n● Assign to employee (optional)\\n\\n[Opening asset form...]')">+ Add Asset</button><button class="btn btn-info" onclick="showAssignAssetForm()">Assign Asset</button><button class="btn btn-success" onclick="showBulkUploadAssetsForm()">Bulk Upload</button><button class="btn btn-secondary" onclick="exportToExcel('assets')">Export Register</button></div><div class="search-bar"><input type="text" class="search-input" placeholder="Search by asset name, serial number, or assignee..."><select class="filter-select"><option>All Categories</option><option>Laptops</option><option>Desktops</option><option>Printers</option><option>Furniture</option><option>AC Units</option></select><select class="filter-select"><option>All Status</option><option>Active</option><option>In Repair</option><option>Scrapped</option></select><button class="btn btn-secondary">Search</button></div><div class="table-container"><div class="table-header"><h3>IT Assets</h3></div><table><thead><tr><th>Asset ID</th><th>Category</th><th>Asset Name</th><th>Serial Number</th><th>Assigned To</th><th>Purchase Date</th><th>Warranty Expiry</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>IT-2023-045</td><td>Laptop</td><td>Dell Latitude 5420</td><td>DL9X8H3</td><td>Priya Sharma (EMP-001)</td><td>15-Mar-2023</td><td>14-Mar-2026</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewAssetDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="editAsset(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr><tr><td>IT-2024-012</td><td>Laptop</td><td>HP EliteBook 840</td><td>HP5Y2K9</td><td>Rahul Verma (EMP-042)</td><td>10-Jan-2024</td><td>09-Jan-2027</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewAssetDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="editAsset(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr><tr><td>IT-2022-089</td><td>Printer</td><td>Canon ImageRunner 2525</td><td>CN8H4P2</td><td>Admin Department</td><td>22-Aug-2022</td><td>21-Aug-2025</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewAssetDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="editAsset(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr><tr><td>IT-2023-078</td><td>Desktop</td><td>Lenovo ThinkCentre M720</td><td>LN6T3R8</td><td>—</td><td>05-Jun-2023</td><td>04-Jun-2026</td><td><span class="status-badge status-pending">Available</span></td><td><div class="action-links"><a class="action-link" onclick="assignAsset(this.closest('tr').querySelector('td').textContent)">Assign</a><a class="action-link" onclick="editAsset(this.closest('tr').querySelector('td').textContent)">Edit</a></div></td></tr></tbody></table></div></div>`;
        }

        function generateInsuranceScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Insurance Management</span></div><div class="alert alert-warning"><span class="alert-icon">●</span><div><strong>Renewal Alert:</strong> 3 insurance policies expiring within 30 days. Please review and renew.</div></div><div class="tabs"><div class="tab active" onclick="switchTab(event, 'medical')">Medical</div><div class="tab" onclick="switchTab(event, 'group-accident')">Group Accident</div><div class="tab" onclick="switchTab(event, 'vehicle')">Vehicle</div><div class="tab" onclick="switchTab(event, 'fire')">Fire & Safety</div></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Total Policies</div><div class="stat-value">8</div><div class="stat-trend">Across all categories</div></div><div class="stat-card success"><div class="stat-label">Active</div><div class="stat-value">6</div><div class="stat-trend">Currently valid</div></div><div class="stat-card warning"><div class="stat-label">Expiring Soon</div><div class="stat-value">3</div><div class="stat-trend">Within 30 days</div></div><div class="stat-card info"><div class="stat-label">Total Premium</div><div class="stat-value">₹12.5L</div><div class="stat-trend">Annual</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showAddPolicyForm()">+ Add Policy</button><button class="btn btn-info" onclick="showRenewalDashboard()">Renewal Dashboard</button><button class="btn btn-secondary" onclick="exportToExcel('insurance')">Export Register</button></div><div class="table-container"><div class="table-header"><h3>Medical Insurance Policies</h3></div><table><thead><tr><th>Policy Number</th><th>Insurance Provider</th><th>Coverage Type</th><th>Employees Covered</th><th>Sum Insured</th><th>Start Date</th><th>Expiry Date</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>MED-2024-001</td><td>ICICI Lombard</td><td>Employee + Family</td><td>156</td><td>₹5,00,000</td><td>01-Apr-2024</td><td>31-Mar-2025</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewPolicyDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="renewPolicy(this.closest('tr').querySelector('td').textContent)">Renew</a></div></td></tr><tr><td>MED-2024-002</td><td>Star Health</td><td>Top-up Coverage</td><td>42</td><td>₹10,00,000</td><td>01-Apr-2024</td><td>31-Mar-2025</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewPolicyDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="renewPolicy(this.closest('tr').querySelector('td').textContent)">Renew</a></div></td></tr></tbody></table></div><div class="table-container" style="margin-top: 24px;"><div class="table-header"><h3>Vehicle Insurance</h3></div><table><thead><tr><th>Vehicle Number</th><th>Vehicle Type</th><th>Insurance Provider</th><th>Policy Number</th><th>Start Date</th><th>Expiry Date</th><th>Premium</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>GJ-01-AB-1234</td><td>Car (Maruti Ertiga)</td><td>Bajaj Allianz</td><td>VEH-2024-045</td><td>15-Feb-2024</td><td>14-Feb-2025</td><td>₹18,500</td><td><span class="status-badge status-warning">Expiring Soon</span></td><td><div class="action-links"><a class="action-link" onclick="viewPolicyDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="renewPolicy(this.closest('tr').querySelector('td').textContent)">Renew</a></div></td></tr><tr><td>GJ-05-CD-5678</td><td>Bike (Honda Activa)</td><td>HDFC ERGO</td><td>VEH-2024-078</td><td>22-Jul-2024</td><td>21-Jul-2025</td><td>₹2,850</td><td><span class="status-badge status-active">Active</span></td><td><div class="action-links"><a class="action-link" onclick="viewPolicyDetails(this.closest('tr').querySelector('td').textContent)">View</a></div></td></tr></tbody></table></div></div>`;
        }

        function generateTravelScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Travel Booking</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Pending Requests</div><div class="stat-value">8</div><div class="stat-trend">Awaiting approval</div></div><div class="stat-card success"><div class="stat-label">Approved This Month</div><div class="stat-value">32</div><div class="stat-trend">December 2024</div></div><div class="stat-card info"><div class="stat-label">Total Spend</div><div class="stat-value">₹2.8L</div><div class="stat-trend">This month</div></div><div class="stat-card warning"><div class="stat-label">Tickets to Book</div><div class="stat-value">5</div><div class="stat-trend">Action required</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showRequestTravelForm()">+ New Travel Request</button><button class="btn btn-info" onclick="showTravelCalendar()">Travel Calendar</button><button class="btn btn-secondary" onclick="exportToExcel('travel')">Export Report</button></div><div class="search-bar"><input type="text" class="search-input" placeholder="Search by employee name, request ID, or destination..."><select class="filter-select"><option>All Status</option><option>Pending</option><option>Approved</option><option>Booked</option><option>Completed</option></select><select class="filter-select"><option>All Travel Modes</option><option>Flight</option><option>Train</option><option>Bus</option><option>Car</option></select><button class="btn btn-secondary">Search</button></div><div class="table-container"><div class="table-header"><h3>Travel Requests</h3></div><table><thead><tr><th>Request ID</th><th>Employee</th><th>From - To</th><th>Travel Date</th><th>Mode</th><th>Purpose</th><th>Estimated Cost</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>TR-2024-089</td><td>Priya Sharma</td><td>Ahmedabad - Delhi</td><td>05-Jan-2025</td><td>Flight</td><td>Donor Meeting</td><td>₹15,000</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Approve request...')">Approve</a><a class="action-link danger" onclick="alert('Reject request...')">Reject</a></div></td></tr><tr><td>TR-2024-090</td><td>Rahul Verma</td><td>Kheda - Gandhinagar</td><td>28-Dec-2024</td><td>Train</td><td>Field Visit</td><td>₹850</td><td><span class="status-badge status-approved">Approved</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Book tickets...')">Book</a><a class="action-link" onclick="viewAttendanceDetails(this.closest('tr').querySelector('td').textContent)">View</a></div></td></tr><tr><td>TR-2024-091</td><td>Anjali Patel</td><td>Ahmedabad - Mumbai</td><td>10-Jan-2025</td><td>Flight</td><td>Training Program</td><td>₹12,500</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Approve request...')">Approve</a><a class="action-link danger" onclick="alert('Reject request...')">Reject</a></div></td></tr><tr><td>TR-2024-092</td><td>Neha Desai</td><td>Ahmedabad - Surat</td><td>02-Jan-2025</td><td>Bus</td><td>Project Review</td><td>₹600</td><td><span class="status-badge status-approved">Approved</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Book tickets...')">Book</a><a class="action-link" onclick="viewAttendanceDetails(this.closest('tr').querySelector('td').textContent)">View</a></div></td></tr></tbody></table></div></div>`;
        }

        function generateStationeryScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Stationery Request</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Pending Requests</div><div class="stat-value">15</div><div class="stat-trend">Awaiting approval</div></div><div class="stat-card success"><div class="stat-label">Fulfilled This Month</div><div class="stat-value">89</div><div class="stat-trend">December 2024</div></div><div class="stat-card info"><div class="stat-label">Total Value</div><div class="stat-value">₹45,800</div><div class="stat-trend">This month</div></div><div class="stat-card warning"><div class="stat-label">Low Stock Items</div><div class="stat-value">8</div><div class="stat-trend">Need reorder</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showRequestStationeryForm()">+ New Request</button><button class="btn btn-info" onclick="showStockInventory()">View Inventory</button><button class="btn btn-secondary" onclick="exportToExcel('stationery')">Export Report</button></div><div class="search-bar"><input type="text" class="search-input" placeholder="Search by employee, item, or request ID..."><select class="filter-select"><option>All Status</option><option>Pending</option><option>Approved</option><option>Fulfilled</option><option>Rejected</option></select><button class="btn btn-secondary">Search</button></div><div class="table-container"><div class="table-header"><h3>Stationery Requests</h3></div><table><thead><tr><th>Request ID</th><th>Requested By</th><th>Department</th><th>Items</th><th>Purpose</th><th>Quantity</th><th>Date</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>ST-2024-156</td><td>Priya Sharma</td><td>Programs</td><td>A4 Paper, Pens</td><td>Workshop Material</td><td>5 reams, 50 pens</td><td>22-Dec-2024</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Approve request...')">Approve</a><a class="action-link danger" onclick="alert('Reject request...')">Reject</a></div></td></tr><tr><td>ST-2024-157</td><td>Admin Team</td><td>Admin</td><td>Printer Toner</td><td>General Use</td><td>2 cartridges</td><td>24-Dec-2024</td><td><span class="status-badge status-approved">Approved</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Fulfill request...')">Fulfill</a><a class="action-link" onclick="viewAttendanceDetails(this.closest('tr').querySelector('td').textContent)">View</a></div></td></tr><tr><td>ST-2024-158</td><td>Rahul Verma</td><td>Programs</td><td>Notebooks, Folders</td><td>Field Survey</td><td>20 notebooks, 10 folders</td><td>25-Dec-2024</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Approve request...')">Approve</a><a class="action-link danger" onclick="alert('Reject request...')">Reject</a></div></td></tr></tbody></table></div><div class="card" style="margin-top: 24px;"><div class="card-title">Current Stock Status</div><div class="table-container" style="box-shadow: none; border: none;"><table><thead><tr><th>Item</th><th>Current Stock</th><th>Minimum Level</th><th>Unit</th><th>Last Reorder</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>A4 Paper</td><td>45</td><td>20</td><td>Reams</td><td>15-Dec-2024</td><td><span class="status-badge status-active">Adequate</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Reorder...')">Reorder</a></div></td></tr><tr><td>Printer Toner (Black)</td><td>3</td><td>5</td><td>Cartridges</td><td>01-Nov-2024</td><td><span class="status-badge status-warning">Low</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Urgent reorder...')">Reorder</a></div></td></tr><tr><td>Pens (Blue)</td><td>250</td><td>100</td><td>Pieces</td><td>10-Dec-2024</td><td><span class="status-badge status-active">Adequate</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Reorder...')">Reorder</a></div></td></tr></tbody></table></div></div></div>`;
        }

        function generateAdminExpensesScreen() {
            return `<div class="content"><div class="breadcrumb"><a href="#" onclick="goToScreen('dashboard')">Home</a><span>/</span><span>Admin Expenses</span></div><div class="stats-grid"><div class="stat-card"><div class="stat-label">Total Expenses (This Month)</div><div class="stat-value">₹3.8L</div><div class="stat-trend">December 2024</div></div><div class="stat-card warning"><div class="stat-label">Pending Approval</div><div class="stat-value">12</div><div class="stat-trend">₹85,000 worth</div></div><div class="stat-card success"><div class="stat-label">Approved</div><div class="stat-value">28</div><div class="stat-trend">₹2.4L settled</div></div><div class="stat-card info"><div class="stat-label">Budget Utilization</div><div class="stat-value">76%</div><div class="stat-trend">On track</div></div></div><div style="margin-bottom: 24px;"><button class="btn btn-primary" onclick="showSubmitAdminExpenseForm()">+ Submit Expense</button><button class="btn btn-info" onclick="showBudgetDashboard()">Budget Dashboard</button><button class="btn btn-secondary" onclick="exportToExcel('admin-expenses')">Export Report</button></div><div class="search-bar"><input type="text" class="search-input" placeholder="Search by expense category, description, or ID..."><select class="filter-select"><option>All Categories</option><option>Office Rent</option><option>Utilities</option><option>Maintenance</option><option>Office Supplies</option><option>Communication</option></select><select class="filter-select"><option>All Status</option><option>Pending</option><option>Approved</option><option>Rejected</option><option>Settled</option></select><button class="btn btn-secondary">Search</button></div><div class="table-container"><div class="table-header"><h3>Admin Expenses</h3></div><table><thead><tr><th>Expense ID</th><th>Date</th><th>Category</th><th>Description</th><th>Amount</th><th>Bills</th><th>Submitted By</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr><td>AEXP-2024-089</td><td>20-Dec-2024</td><td>Office Rent</td><td>December Rent - HO</td><td>₹85,000</td><td>●1 file</td><td>Admin Team</td><td><span class="status-badge status-approved">Approved</span></td><td><div class="action-links"><a class="action-link" onclick="viewAttendanceDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="downloadExpenseBills(this.closest('tr').querySelector('td').textContent)">Download</a></div></td></tr><tr><td>AEXP-2024-090</td><td>22-Dec-2024</td><td>Utilities</td><td>Electricity Bill - December</td><td>₹18,500</td><td>●1 file</td><td>Admin Team</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Approve...')">Approve</a><a class="action-link danger" onclick="alert('Reject...')">Reject</a></div></td></tr><tr><td>AEXP-2024-091</td><td>24-Dec-2024</td><td>Maintenance</td><td>AC Servicing - All Units</td><td>₹12,800</td><td>●2 files</td><td>Admin Team</td><td><span class="status-badge status-pending">Pending</span></td><td><div class="action-links"><a class="action-link" onclick="alert('Approve...')">Approve</a><a class="action-link danger" onclick="alert('Reject...')">Reject</a></div></td></tr><tr><td>AEXP-2024-092</td><td>25-Dec-2024</td><td>Communication</td><td>Internet & Phone - Dec</td><td>₹8,900</td><td>●1 file</td><td>Admin Team</td><td><span class="status-badge status-approved">Approved</span></td><td><div class="action-links"><a class="action-link" onclick="viewAttendanceDetails(this.closest('tr').querySelector('td').textContent)">View</a><a class="action-link" onclick="downloadExpenseBills(this.closest('tr').querySelector('td').textContent)">Download</a></div></td></tr></tbody></table></div></div>`;
        }

        // Tab switching function
        function switchTab(event, tabName) {
            // Remove active class from all tabs
            const tabs = event.target.parentElement.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Add active class to clicked tab
            event.target.classList.add('active');

            // Here you would normally switch the content
            // For wireframes, we'll just show an alert
            alert('Switching to ' + tabName + ' tab view');
        }
    </script>

    <script>
        let currentScreen = 'login';
        let selectedUserType = '';
        let currentUser = null;

        // User credentials for demo
        const userCredentials = {
            management: { username: 'admin', password: 'demo123', name: 'Admin User', role: 'Management' },
            program: { username: 'program.user', password: 'demo123', name: 'Program User', role: 'Program Team' },
            hr: { username: 'hr.user', password: 'demo123', name: 'HR User', role: 'HR Team' },
            admin: { username: 'admin.user', password: 'demo123', name: 'Admin User', role: 'Admin Team' },
            employee: { username: 'employee', password: 'demo123', name: 'Employee User', role: 'Employee' }
        };

        function selectUserType(type, element) {
            console.log('selectUserType called with type:', type);
            selectedUserType = type;

            // Remove selected class from all cards
            document.querySelectorAll('.user-type-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Add selected class to clicked card
            if (element) {
                element.classList.add('selected');
                console.log('Element selected:', element);
            }

            // Auto-populate credentials
            const creds = userCredentials[type];
            console.log('Credentials:', creds);

            const usernameField = document.getElementById('username');
            const passwordField = document.getElementById('password');

            console.log('Username field:', usernameField);
            console.log('Password field:', passwordField);

            if (usernameField && passwordField && creds) {
                usernameField.value = creds.username;
                passwordField.value = creds.password;
                console.log('Fields populated successfully');
            } else {
                console.error('ERROR: Fields or credentials not found!');
            }

            currentUser = creds;
        }

        function login() {
            if (!selectedUserType) {
                alert('Please select a user type first');
                return;
            }

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (!username || !password) {
                alert('Please enter username and password');
                return;
            }

            // Set current user based on selected type
            const userRoles = {
                'management': 'Management',
                'program': 'Program Team',
                'hr': 'HR Team',
                'admin': 'Admin Team',
                'employee': 'Employee'
            };

            currentUser = {
                username: username,
                name: username.split('.').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' '),
                role: userRoles[selectedUserType],
                type: selectedUserType
            };

            // Create dashboard screen dynamically with role-based sidebar
            createDashboardWithRole();
        }

        function createDashboardWithRole() {
            // Remove any existing dashboard screen
            const existingDashboard = document.getElementById('screen-dashboard');
            if (existingDashboard) {
                existingDashboard.remove();
            }

            // Create new dashboard screen with role-based sidebar
            const dashboardScreen = document.createElement('div');
            dashboardScreen.className = 'screen';
            dashboardScreen.id = 'screen-dashboard';

            dashboardScreen.innerHTML = `
                <div class="app-container">
                    ${generateSidebar('dashboard')}
                    <main class="main-content">
                        ${generateTopbar('Dashboard Overview')}
                        ${generateDashboardContent()}
                    </main>
                </div>
            `;

            // Add to document
            document.body.insertBefore(dashboardScreen, document.querySelector('script'));

            // Hide all screens and show dashboard
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            dashboardScreen.classList.add('active');
            currentScreen = 'dashboard';
        }

        function generateDashboardContent() {
            return `
                <div class="content">
                    <div class="breadcrumb">
                        <a href="#" onclick="goToScreen('dashboard')">Home</a>
                        <span>/</span>
                        <span>Dashboard</span>
                    </div>

                    <div class="alert alert-info">
                        <span class="alert-icon">●</span>
                        <div>
                            <strong>Welcome to FWWB Integrated Management System</strong><br>
                            Empowering Millions of Indian Women through efficient program, HR, and administrative management.
                        </div>
                    </div>

                    <!-- Stats Overview -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Active Projects</div>
                            <div class="stat-value">24</div>
                            <div class="stat-trend">↑ 12% from last quarter</div>
                        </div>
                        <div class="stat-card info">
                            <div class="stat-label">Total Employees</div>
                            <div class="stat-value">156</div>
                            <div class="stat-trend">↑ 8 new hires this month</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-label">Budget Utilization</div>
                            <div class="stat-value">67%</div>
                            <div class="stat-trend">On track for FY 2024-25</div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-label">Pending Approvals</div>
                            <div class="stat-value">15</div>
                            <div class="stat-trend">5 overdue items</div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="card">
                        <div class="card-title">Quick Actions</div>
                        <div class="btn-group">
                            ${hasAccess('activities') ? '<button class="btn btn-primary" onclick="goToScreen(\'activities\')">+ New Activity</button>' : ''}
                            ${hasAccess('expenses') ? '<button class="btn btn-info" onclick="goToScreen(\'expenses\')">↑ Submit Expense</button>' : ''}
                            ${hasAccess('employees') ? '<button class="btn btn-success" onclick="goToScreen(\'employees\')">+ Add Employee</button>' : ''}
                            ${hasAccess('reports') ? '<button class="btn btn-secondary" onclick="goToScreen(\'reports\')">■ Generate Report</button>' : ''}
                        </div>
                    </div>

                    <!-- Program Impact Overview -->
                    <div class="card">
                        <div class="card-title">Program Impact (FY 2024-25)</div>
                        <div class="stats-grid">
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Women Reached</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">2.5M+</div>
                                <div class="widget-subtitle">Across all programs</div>
                            </div>
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Micro-Credit Disbursed</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">₹125Cr</div>
                                <div class="widget-subtitle">Through partner MFIs</div>
                            </div>
                            <div class="widget">
                                <div class="widget-header">
                                    <span class="widget-title">Training Sessions</span>
                                    <span class="widget-icon">●</span>
                                </div>
                                <div class="widget-value">450+</div>
                                <div class="widget-subtitle">Capacity building initiatives</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                selectedUserType = '';
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                document.querySelectorAll('.user-type-card').forEach(card => {
                    card.classList.remove('selected');
                });
                goToScreen('login');
            }
        }

        // Role-based access control
        const rolePermissions = {
            management: ['dashboard', 'activities', 'budget', 'expenses', 'monitoring', 'reports', 'recruitment', 'employees', 'attendance', 'leave', 'performance', 'payroll', 'ess', 'assets', 'insurance', 'travel', 'stationery', 'admin-expenses'],
            program: ['dashboard', 'activities', 'budget', 'expenses', 'monitoring', 'reports', 'attendance', 'leave', 'ess'],
            hr: ['dashboard', 'recruitment', 'employees', 'attendance', 'leave', 'performance', 'payroll', 'ess'],
            admin: ['dashboard', 'assets', 'insurance', 'travel', 'stationery', 'admin-expenses', 'attendance', 'leave', 'ess'],
            employee: ['dashboard', 'attendance', 'leave', 'ess']  // General employees: Self-service only
        };

        function hasAccess(screenName) {
            // Login and dashboard are always accessible
            if (screenName === 'login') return true;

            // If not logged in, only allow login
            if (!currentUser) return false;

            // Get user's role-based permissions
            const userType = currentUser.type || selectedUserType;
            const permissions = rolePermissions[userType] || [];
            return permissions.includes(screenName);
        }

        function goToScreen(screenName) {
            // Check access
            if (!hasAccess(screenName)) {
                alert('Access Denied: You do not have permission to access this module.');
                return;
            }

            // PRESERVE SIDEBAR SCROLL POSITION - Capture BEFORE any DOM changes
            const oldSidebar = document.querySelector('.sidebar');
            const sidebarScrollPos = oldSidebar ? oldSidebar.scrollTop : 0;

            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });

            // Check if screen exists
            let targetScreen = document.getElementById('screen-' + screenName);

            // If screen doesn't exist and it's a dynamic screen, create it
            if (!targetScreen && screenTemplates[screenName]) {
                targetScreen = createDynamicScreen(screenName);
            }

            if (targetScreen) {
                targetScreen.classList.add('active');
                currentScreen = screenName;
            } else {
                alert('Screen not found: ' + screenName);
                return;
            }

            // Update active nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // RESTORE SIDEBAR SCROLL POSITION - Query NEW sidebar and restore scroll
            setTimeout(() => {
                const newSidebar = document.querySelector('.sidebar');
                if (newSidebar) {
                    newSidebar.scrollTop = sidebarScrollPos;
                }

                // Scroll main content area to top (not the whole window)
                const mainContent = targetScreen.querySelector('.main-content');
                if (mainContent) {
                    mainContent.scrollTop = 0;
                }
            }, 10);
        }

        function createDynamicScreen(screenName) {
            const template = screenTemplates[screenName];
            if (!template) return null;

            // Create screen element
            const screen = document.createElement('div');
            screen.className = 'screen';
            screen.id = 'screen-' + screenName;

            // Build screen HTML
            screen.innerHTML = `
                <div class="app-container">
                    ${generateSidebar(screenName)}
                    <main class="main-content">
                        ${generateTopbar(template.title)}
                        ${template.content()}
                    </main>
                </div>
            `;

            // Add to document
            document.body.insertBefore(screen, document.querySelector('script'));

            return screen;
        }

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // File upload handling
        function handleFileUpload(inputId, listId) {
            const input = document.getElementById(inputId);
            const fileList = document.getElementById(listId);

            if (input && fileList) {
                input.addEventListener('change', function() {
                    fileList.innerHTML = '';
                    Array.from(this.files).forEach((file, index) => {
                        const fileDiv = document.createElement('div');
                        fileDiv.className = 'uploaded-file';
                        fileDiv.innerHTML = `
                            <span class="file-name">${file.name} (${(file.size / 1024).toFixed(1)} KB)</span>
                            <span class="remove-file" onclick="removeFile('${inputId}', ${index})">×</span>
                        `;
                        fileList.appendChild(fileDiv);
                    });
                });
            }
        }

        function removeFile(inputId, index) {
            const input = document.getElementById(inputId);
            const dt = new DataTransfer();
            const files = input.files;

            for (let i = 0; i < files.length; i++) {
                if (i !== index) {
                    dt.items.add(files[i]);
                }
            }

            input.files = dt.files;
            input.dispatchEvent(new Event('change'));
        }

        // GPS Location capture
        function captureGPSLocation(fieldId) {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    document.getElementById(fieldId).value = `${lat.toFixed(6)}, ${lon.toFixed(6)}`;
                    alert('Location captured successfully!');
                }, function(error) {
                    alert('Unable to capture location. Please enable GPS.');
                });
            } else {
                alert('Geolocation is not supported by your browser.');
            }
        }

        // Notification functions
        function showNotifications() {
            const notifications = [
                '● 5 pending expense approvals',
                '● 3 insurance policies expiring within 30 days',
                '● 2 budget alerts - projects at >85% utilization',
                '● 12 leave requests awaiting approval',
                '● 4 resignations in notice period'
            ];
            alert('Notifications:\n\n' + notifications.join('\n'));
        }

        // Activity Management functions
        function showAddActivityForm() {
            showInfoModal('Add New Activity', 'Add New Activity Form\n\nIn production, this will open a modal form to:\n- Enter activity details\n- Select project\n- Assign team members\n- Set budget and timeline\n- Add LFA indicators');
        }

        // Export functions
        function exportToExcel(type) {
            const typeNames = {
                'activities': 'Activities',
                'budget': 'Budget Data',
                'expenses': 'Expense Report',
                'monitoring': 'Monitoring Data'
            };
            showInfoModal("Exporting", ` ${typeNames[type] || type} to Excel...\n\nFile will be downloaded as: ${type}_${new Date().toISOString().split('T')[0]}.xlsx`);
        }

        // Budget Management functions
        function showBudgetAllocationForm() {
            showInfoModal('Budget Allocation', 'Budget Allocation Form\n\nIn production, this will open a form to:\n- Select project\n- Allocate budget to activities\n- Set budget categories\n- Define spending limits');
        }

        // Expense Management functions
        function showExpenseSubmissionForm() {
            showInfoModal('Submit Expense', 'Submit Expense Form\n\nIn production, this will open a form to:\n- Upload bills/receipts\n- Link to activity\n- Enter amount and description\n- Submit for approval workflow');
        }

        function bulkUpload(type) {
            const typeNames = {
                'expenses': 'Expenses',
                'monitoring': 'Monitoring Data'
            };
            showInfoModal("Bulk Upload", ` ${typeNames[type]}\n\nIn production, this will:\n- Download Excel template\n- Allow bulk data upload\n- Validate data\n- Import into system`);
        }

        // Monitoring functions
        function showFieldDataEntryForm() {
            showInfoModal('Field Data Entry', 'Field Data Entry Form\n\nIn production, this will open a form to:\n- Capture beneficiary data\n- Upload photos\n- Tag GPS location\n- Update LFA indicators\n- Support offline mode');
        }

        function downloadOfflineApp() {
            showInfoModal('Download App', 'Download Offline Data Collection App\n\nIn production, this will:\n- Provide mobile app download link\n- Support Android and iOS\n- Enable offline data capture\n- Auto-sync when online');
        }

        // Report functions
        function generateReport(type) {
            const typeNames = {
                'budget': 'Budget Report',
                'performance': 'Performance Report'
            };
            showInfoModal("Generating Report", ` ${typeNames[type]}...\n\nReport will include:\n- Current status\n- Historical trends\n- Visual charts\n- Export options (PDF/Excel)`);
        }

        function generateCustomReport() {
            showInfoModal('Generating Report', 'Generating Custom Report...\n\nBased on your selections:\n- Report Type: Selected\n- Date Range: Selected\n- Projects/Activities: Selected\n- Format: Selected\n\nReport will download automatically.');
        }

        function clearReportForm() {
            if (confirm('Clear all report selections?')) {
                alert('Report form cleared.');
            }
        }

        function generateQuickReport(type) {
            const typeNames = {
                'monthly': 'Current Month Summary',
                'quarterly': 'Quarterly Report (Q3)',
                'annual': 'Annual Report (FY 2024-25)',
                'impact': 'Impact Dashboard'
            };
            showInfoModal("Generating Report", ` ${typeNames[type]}...\n\nReport includes:\n- Key metrics\n- Progress tracking\n- Beneficiary impact\n- Budget utilization\n\nDownloading...`);
        }

        function viewProjectDashboard(project) {
            const projectNames = {
                'women-entrepreneurship': 'Women Entrepreneurship Program',
                'financial-literacy': 'Financial Literacy Campaign',
                'microfinance': 'Microfinance Support Initiative'
            };
            showInfoModal("Opening Dashboard", ` ${projectNames[project]} Dashboard\n\nDashboard will show:\n- Activities timeline\n- Budget vs actual\n- Beneficiaries reached\n- LFA indicators\n- Photos and reports`);
            // In production, this would navigate to a dedicated project dashboard screen
        }

        // ==============================================
        // TABLE ACTION FUNCTIONS - FULLY FUNCTIONAL
        // ==============================================

        // Activity Management Actions
        function viewActivityDetails(activityId) {
            showInfoModal("Activity Details", ` - ${activityId}\n\n● Activity Name\n● Project Assignment\n● Budget Allocation\n● Timeline & Milestones\n● Team Members\n● Progress Status\n● Documents & Reports\n● LFA Indicators\n\n[In production: Modal with full details]`);
        }

        function editActivity(activityId) {
            showInfoModal("Edit Activity", ` - ${activityId}\n\nEditable Fields:\n● Activity name\n● Project assignment\n● Budget amount\n● Start/End dates\n● Team members\n● LFA indicators\n● Status updates\n\n[In production: Modal form with save/cancel]`);
        }

        // Expense Management Actions
        function viewExpenseDetails(expenseId) {
            showInfoModal("Expense Details", ` - ${expenseId}\n\n● Expense description\n● Amount & breakdown\n● Activity linkage\n● Bills/receipts (attached)\n● Approval workflow\n● Settlement status\n● Payment details\n\n[In production: Modal with document viewer]`);
        }

        function downloadExpenseBills(expenseId) {
            showInfoModal("Downloading Bills", ` - ${expenseId}\n\n● Downloading all attached bills\n● Format: PDF/Images in ZIP\n● File: bills_${expenseId}_${new Date().toISOString().split('T')[0]}.zip\n\n[Download started]`);
        }

        function approveExpense(expenseId) {
            if (confirm(`Approve Expense ${expenseId}?\n\nThis will:\n● Move expense to approved status\n● Trigger payment processing\n● Send notification to finance team\n\nConfirm approval?`)) {
                showInfoModal("Success", ` Expense ${expenseId} approved successfully!\n\nNext steps:\n● Finance team notified\n● Payment processing initiated\n● Submitter notified via email`);
            }
        }

        function rejectExpense(expenseId) {
            const reason = prompt('Reject Expense ' + expenseId + '\n\nPlease enter rejection reason:', '');
            if (reason && reason.trim()) {
                showInfoModal("Action Required", ` Expense ${expenseId} rejected\n\nReason: ${reason}\n\n● Submitter will be notified\n● Expense marked as rejected\n● Can be resubmitted after corrections`);
            }
        }

        function resubmitExpense(expenseId) {
            alert(`Resubmit Expense - ${expenseId}\n\nIn production, this will:\n● Load previous expense data\n● Allow corrections based on rejection reason\n● Upload new/corrected bills\n● Resubmit for approval\n\n[Opening resubmission form...]`);
        }

        function viewRejectionReason(expenseId) {
            alert(`Rejection Reason - ${expenseId}\n\n"Bill amount exceeds activity budget allocation. Please provide breakdown and justification."\n\n— Rejected by: Anjali Patel (Finance Manager)\n— Date: 20-Dec-2024\n— Action: Resubmit with corrections`);
        }

        // Monitoring & Data Actions
        function viewMonitoringData(entryId) {
            alert(`Monitoring Data - ${entryId}\n\n● Field location & GPS\n● Beneficiary details\n● Survey responses\n● Photos captured\n● LFA indicators updated\n● Data collector info\n● Timestamp\n\n[In production: Detailed view with photos]`);
        }

        function verifyMonitoringData(entryId) {
            if (confirm(`Verify Monitoring Data ${entryId}?\n\nThis will:\n● Mark data as verified\n● Include in reports\n● Lock for editing\n\nConfirm verification?`)) {
                showInfoModal("Success", ` Data ${entryId} verified successfully!\n\n● Data locked\n● Included in dashboards\n● Collector notified`);
            }
        }

        // Report Actions
        function downloadReport(reportId) {
            const formats = ['Excel (.xlsx)', 'PDF (.pdf)', 'Word (.docx)'];
            const format = prompt(`Download Report ${reportId}\n\nSelect format:\n1 - Excel (.xlsx)\n2 - PDF (.pdf)\n3 - Word (.docx)\n\nEnter number (1-3):`, '1');
            if (format >= 1 && format <= 3) {
                showInfoModal("Downloading", ` ${reportId}\n\nFormat: ${formats[format-1]}\n● Processing report\n● Generating file\n● Download will start automatically\n\n[Downloading...]`);
            }
        }

        // Recruitment Actions
        function viewCandidateDetails(candidateId) {
            showInfoModal("Candidate Details", ` - ${candidateId}\n\n● Personal information\n● Resume/CV\n● Application form\n● Interview notes\n● Assessment scores\n● Reference checks\n● Interview schedule\n\n[In production: Full candidate profile]`);
        }

        function scheduleInterview(candidateId) {
            showInfoModal("Schedule Interview", ` - ${candidateId}\n\nIn production, this will open form to:\n● Select interview date/time\n● Choose interview panel\n● Set interview type (Phone/Video/In-person)\n● Send calendar invite\n● Notify candidate\n\n[Opening scheduler...]`);
        }

        function shortlistCandidate(candidateId) {
            if (confirm(`Shortlist Candidate ${candidateId}?\n\nThis will:\n● Move to shortlisted status\n● Enable interview scheduling\n● Send notification\n\nConfirm?`)) {
                showInfoModal("Success", ` Candidate ${candidateId} shortlisted!\n\n● Status updated\n● HR team notified\n● Ready for interview scheduling`);
            }
        }

        function rejectCandidate(candidateId) {
            const reason = prompt('Reject Candidate ' + candidateId + '\n\nReason (optional):', '');
            if (confirm('Confirm rejection?')) {
                showInfoModal("Action Required", ` Candidate ${candidateId} rejected\n\n${reason ? 'Reason: ' + reason : ''}\n● Status updated to rejected\n● Rejection email will be sent\n● Application closed`);
            }
        }

        // Employee Actions
        function viewEmployeeDetails(empId) {
            showInfoModal("Employee Profile", ` - ${empId}\n\n● Personal details\n● Employment history\n● Current assignment\n● Salary details\n● Leave balance\n● Performance records\n● Documents\n● Attendance summary\n\n[In production: Complete employee profile]`);
        }

        function editEmployee(empId) {
            showInfoModal("Edit Employee", ` - ${empId}\n\nEditable sections:\n● Contact information\n● Emergency contacts\n● Bank details\n● Department/designation\n● Reporting manager\n● Salary components\n\n[Opening edit form...]`);
        }

        function viewAttendanceDetails(empId, date) {
            showInfoModal("Attendance Details", `\n\n● Employee: ${empId}\n● Date: ${date || 'Today'}\n● Check-in time & location\n● Check-out time\n● Working hours\n● GPS location (if field)\n● Regularization requests\n\n[In production: Detailed attendance view]`);
        }

        function markAttendance(empId) {
            showInfoModal("Mark Attendance", ` - ${empId}\n\nIn production, this will:\n● Capture current GPS location\n● Record timestamp\n● Mark as present\n● Calculate working hours\n\n[Processing...]`);
        }

        // Leave Actions
        function approveLeave(empId, leaveId) {
            if (confirm(`Approve Leave Request?\n\nEmployee: ${empId}\n\nThis will:\n● Update leave balance\n● Send approval notification\n● Update team calendar\n\nConfirm?`)) {
                showInfoModal("Success", ` Leave approved!\n\n● Employee notified\n● Calendar updated\n● Leave balance deducted`);
            }
        }

        function rejectLeave(empId, leaveId) {
            const reason = prompt('Reject Leave Request\n\nReason:', '');
            if (reason && reason.trim()) {
                showInfoModal("Action Required", ` Leave rejected\n\nReason: ${reason}\n\n● Employee will be notified\n● No balance deduction\n● Can apply again`);
            }
        }

        // Performance Actions
        function conductReview(empId) {
            showInfoModal("Performance Review", ` - ${empId}\n\nReview includes:\n● KPI achievement assessment\n● Behavioral competencies\n● Goal achievement\n● Development areas\n● Rating & recommendations\n● Promotion/increment suggestions\n\n[Opening review form...]`);
        }

        function sendReminder(empId, type) {
            showInfoModal("Sending Reminder", ` - ${empId}\n\nReminder type: ${type || 'Pending action'}\n\n● Email notification sent\n● In-app notification created\n● Escalation scheduled if no response\n\n✓ Reminder sent successfully!`);
        }

        // Payroll Actions
        function generatePayrollChallan(type) {
            alert(`Generate ${type} Challan\n\nIn production, this will:\n● Calculate total amount\n● Generate ECR/challan file\n● Create payment form\n● Provide bank details\n● Set due date reminder\n\n[Generating challan...]`);
        }

        function viewPayrollReceipt(type) {
            alert(`View Payment Receipt - ${type}\n\n● Payment confirmation\n● Transaction ID\n● Date & amount\n● Bank reference\n● Download receipt\n\n[Opening receipt...]`);
        }

        // ESS Actions
        function downloadPayslip(month) {
            showInfoModal("Downloading", ` Payslip - ${month}\n\nPayslip includes:\n● Gross salary breakdown\n● Deductions (PF, TDS, etc)\n● Net salary\n● YTD summary\n● Payment details\n\nFormat: PDF\n\n[Download started]`);
        }

        function viewForm16() {
            alert(`View Form 16 - FY 2024-25\n\n● TDS certificate\n● Salary breakup\n● Deductions claimed\n● Tax computation\n● Employer details\n\nFormat: PDF (digitally signed)\n\n[Opening Form 16...]`);
        }

        function applyLeave() {
            alert(`Apply for Leave\n\nIn production, this will open form to:\n● Select leave type\n● Choose dates\n● Enter reason\n● Attach documents (if medical)\n● Submit for approval\n\n[Opening leave application form...]`);
        }

        function raiseITTicket() {
            alert(`Raise IT Support Ticket\n\nTicket categories:\n● Hardware issues\n● Software installation\n● Network problems\n● Email/access issues\n● New requirements\n\n[Opening support form...]`);
        }

        // Asset Management Actions
        function viewAssetDetails(assetId) {
            alert(`Asset Details - ${assetId}\n\n● Asset category & name\n● Serial number\n● Purchase details\n● Current assignee\n● Warranty information\n● Service history\n● Condition status\n● QR code\n\n[In production: Full asset details]`);
        }

        function editAsset(assetId) {
            alert(`Edit Asset - ${assetId}\n\nEditable fields:\n● Asset name\n● Category\n● Assignee\n● Location\n● Status\n● Maintenance notes\n● Warranty dates\n\n[Opening edit form...]`);
        }

        function assignAsset(assetId) {
            alert(`Assign Asset - ${assetId}\n\nIn production, this will:\n● Select employee\n● Set assignment date\n● Generate assignment letter\n● Send notification\n● Update asset register\n\n[Opening assignment form...]`);
        }

        // Insurance Actions
        function viewPolicyDetails(policyId) {
            alert(`Policy Details - ${policyId}\n\n● Policy number & provider\n● Coverage details\n● Sum insured\n● Premium amount\n● Covered members\n● Claim history\n● Renewal date\n● Documents\n\n[In production: Full policy view]`);
        }

        function renewPolicy(policyId) {
            alert(`Renew Policy - ${policyId}\n\nRenewal process:\n● Get renewal quote\n● Compare with other insurers\n● Review coverage\n● Process payment\n● Update policy dates\n● Archive old policy\n\n[Opening renewal workflow...]`);
        }

        // Travel Actions
        function approveTravelRequest(requestId) {
            if (confirm(`Approve Travel Request ${requestId}?\n\nThis will:\n● Approve travel\n● Enable ticket booking\n● Send approval notification\n\nConfirm?`)) {
                showInfoModal("Success", ` Travel approved - ${requestId}\n\n● Employee notified\n● Ready for booking\n● Advance payment can be processed`);
            }
        }

        function rejectTravelRequest(requestId) {
            const reason = prompt('Reject Travel Request\n\nReason:', '');
            if (reason && reason.trim()) {
                showInfoModal("Action Required", ` Travel rejected - ${requestId}\n\nReason: ${reason}\n\n● Employee notified\n● Request closed`);
            }
        }

        function bookTickets(requestId) {
            alert(`Book Tickets - ${requestId}\n\nIn production, this will:\n● Integrate with travel portal\n● Search flights/trains\n● Select best options\n● Process booking\n● Send tickets to employee\n● Update expense records\n\n[Opening booking interface...]`);
        }

        // Stationery Actions
        function approveStationeryRequest(requestId) {
            if (confirm(`Approve Stationery Request ${requestId}?\n\nThis will enable fulfillment.\n\nConfirm?`)) {
                showInfoModal("Success", ` Request approved - ${requestId}\n\n● Admin team notified\n● Ready for fulfillment\n● Stock will be issued`);
            }
        }

        function rejectStationeryRequest(requestId) {
            const reason = prompt('Reject Stationery Request\n\nReason:', '');
            if (reason && reason.trim()) {
                showInfoModal("Action Required", ` Request rejected - ${requestId}\n\nReason: ${reason}\n\n● Employee notified`);
            }
        }

        function fulfillStationeryRequest(requestId) {
            alert(`Fulfill Request - ${requestId}\n\nIn production, this will:\n● Mark items as issued\n● Update stock levels\n● Record issue date\n● Get employee signature\n● Close request\n\n[Processing fulfillment...]`);
        }

        function reorderStationery(item) {
            alert(`Reorder ${item}\n\nIn production, this will:\n● Create purchase requisition\n● Get vendor quotes\n● Generate PO\n● Track delivery\n● Update stock on receipt\n\n[Creating reorder request...]`);
        }

        // Admin Expense Actions
        function approveAdminExpense(expenseId) {
            if (confirm(`Approve Admin Expense ${expenseId}?\n\nThis will process payment.\n\nConfirm?`)) {
                showInfoModal("Success", ` Admin expense approved - ${expenseId}\n\n● Finance team notified\n● Payment processing initiated`);
            }
        }

        function rejectAdminExpense(expenseId) {
            const reason = prompt('Reject Admin Expense\n\nReason:', '');
            if (reason && reason.trim()) {
                showInfoModal("Action Required", ` Admin expense rejected - ${expenseId}\n\nReason: ${reason}`);
            }
        }

        // Initialize on page load
        window.onload = function() {
            goToScreen('login');
        }
    </script>

    <!-- Universal Modal Container -->
    <div id="universalModal" class="modal-overlay" onclick="if(event.target === this) closeUniversalModal()">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modalTitle">Modal Title</h3>
                <button class="modal-close" onclick="closeUniversalModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content will be inserted here -->
            </div>
            <div class="modal-footer" id="modalFooter">
                <!-- Dynamic buttons will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Universal Modal Functions
        function showUniversalModal(title, bodyHTML, footerHTML) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = bodyHTML;
            document.getElementById('modalFooter').innerHTML = footerHTML || `
                <button class="btn btn-secondary" onclick="closeUniversalModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitModalForm()">Submit</button>
            `;
            document.getElementById('universalModal').classList.add('active');
        }

        function closeUniversalModal() {
            document.getElementById('universalModal').classList.remove('active');
        }

        function submitModalForm() {
            showInfoModal('Success', 'Form submitted successfully!\\n\\nIn production, this will:\\n● Validate form data\\n● Send to backend API\\n● Show success message\\n● Refresh data\\n● Close modal');
            closeUniversalModal();
        }

        // Helper function for informational alerts
        function showInfoModal(title, message) {
            // Convert \n to <br> for HTML display
            const formattedMessage = message.replace(/\\n/g, '<br>').replace(/\n/g, '<br>');
            const bodyHTML = `
                <div style="padding: 20px; line-height: 1.6;">
                    ${formattedMessage}
                </div>
            `;
            const footerHTML = `<button class="btn btn-primary" onclick="closeUniversalModal()">OK</button>`;
            showUniversalModal(title, bodyHTML, footerHTML);
        }

        // Activity Management Modals
        function showAddActivityForm() {
            const bodyHTML = `
                <div class="form-info">Create a new activity and assign it to a project with budget allocation</div>

                <div class="form-group">
                    <label class="required">Activity Name</label>
                    <input type="text" class="form-control" placeholder="Enter activity name">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Project</label>
                        <select class="form-control">
                            <option>Select Project</option>
                            <option>Women Entrepreneurship</option>
                            <option>Financial Literacy</option>
                            <option>Microfinance Support</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Budget Allocated</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Start Date</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">End Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label>Team Members</label>
                    <select class="form-control" multiple style="height: 100px;">
                        <option>Priya Sharma (EMP-001)</option>
                        <option>Rahul Verma (EMP-042)</option>
                        <option>Anjali Patel (EMP-089)</option>
                        <option>Neha Desai (EMP-145)</option>
                    </select>
                    <small style="color: #718096;">Hold Ctrl/Cmd to select multiple</small>
                </div>

                <div class="form-group">
                    <label>Activity Description</label>
                    <textarea class="form-control" placeholder="Enter activity details..."></textarea>
                </div>

                <div class="form-group">
                    <label>LFA Indicators</label>
                    <input type="text" class="form-control" placeholder="Define measurable indicators">
                </div>
            `;
            showUniversalModal('Add New Activity', bodyHTML);
        }

        // Expense Management Modals
        function showExpenseSubmissionForm() {
            const bodyHTML = `
                <div class="form-info">Submit an expense claim with bills for reimbursement</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Activity</label>
                        <select class="form-control">
                            <option>Select Activity</option>
                            <option>ACT-2024-001 - Community Training</option>
                            <option>ACT-2024-002 - Financial Literacy</option>
                            <option>ACT-2024-003 - Microfinance Camp</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Expense Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Expense Description</label>
                    <input type="text" class="form-control" placeholder="What was the expense for?">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Amount</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label class="required">Category</label>
                        <select class="form-control">
                            <option>Travel</option>
                            <option>Food & Accommodation</option>
                            <option>Materials</option>
                            <option>Venue</option>
                            <option>Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Upload Bills/Receipts</label>
                    <div class="file-upload-area" onclick="document.getElementById('expenseBills').click()">
                        <input type="file" id="expenseBills" multiple accept="image/*,application/pdf">
                        <div style="color: #718096;">
                            <div style="font-size: 32px; margin-bottom: 8px;">↑</div>
                            <div>Click to upload bills or drag and drop</div>
                            <div style="font-size: 12px; margin-top: 4px;">PDF, JPG, PNG (Max 5MB each)</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Additional Notes</label>
                    <textarea class="form-control" placeholder="Any additional information..."></textarea>
                </div>
            `;
            showUniversalModal('Submit Expense Claim', bodyHTML);
        }

        // Budget Management Modals
        function showBudgetAllocationForm() {
            const bodyHTML = `
                <div class="form-info">Allocate budget to activities within a project</div>

                <div class="form-group">
                    <label class="required">Project</label>
                    <select class="form-control">
                        <option>Select Project</option>
                        <option>Women Entrepreneurship</option>
                        <option>Financial Literacy</option>
                        <option>Microfinance Support</option>
                    </select>
                </div>

                <div class="form-section-title">Budget Breakdown</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Personnel Costs</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label class="required">Travel & Transport</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Materials & Supplies</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label class="required">Venue & Equipment</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Miscellaneous</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label>Contingency (10%)</label>
                        <input type="number" class="form-control" placeholder="₹ Auto-calculated" disabled>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <div style="display: flex; justify-content: space-between; padding: 16px; background: #f7fafc; border-radius: 8px; font-weight: 600;">
                        <span>Total Budget:</span>
                        <span style="color: #2E3192; font-size: 18px;">₹ 0</span>
                    </div>
                </div>
            `;
            showUniversalModal('Allocate Budget', bodyHTML);
        }

        // Field Data Entry Modal
        function showFieldDataEntryForm() {
            const bodyHTML = `
                <div class="form-info">Record field visit data and beneficiary information</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Activity</label>
                        <select class="form-control">
                            <option>Select Activity</option>
                            <option>ACT-2024-001 - Community Training</option>
                            <option>ACT-2024-002 - Financial Literacy</option>
                            <option>ACT-2024-003 - Microfinance Camp</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Visit Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Location</label>
                    <input type="text" class="form-control" placeholder="Village/Town name">
                </div>

                <div class="form-group">
                    <label>GPS Location</label>
                    <div style="display: flex; gap: 12px;">
                        <input type="text" id="fieldGPS" class="form-control" placeholder="Will be captured" readonly>
                        <button class="btn btn-success" onclick="captureGPSLocation('fieldGPS')" style="white-space: nowrap;">● Capture GPS</button>
                    </div>
                </div>

                <div class="form-section-title">Beneficiary Details</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Beneficiaries Reached</label>
                        <input type="number" class="form-control" placeholder="Number of people">
                    </div>
                    <div class="form-group">
                        <label>Women Participants</label>
                        <input type="number" class="form-control" placeholder="Number of women">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Upload Photos</label>
                    <div class="file-upload-area" onclick="document.getElementById('fieldPhotos').click()">
                        <input type="file" id="fieldPhotos" multiple accept="image/*">
                        <div style="color: #718096;">
                            <div style="font-size: 32px; margin-bottom: 8px;">📸</div>
                            <div>Click to upload field photos</div>
                            <div style="font-size: 12px; margin-top: 4px;">JPG, PNG (Max 5MB each)</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Observations & Notes</label>
                    <textarea class="form-control" placeholder="Record your observations from the field visit..."></textarea>
                </div>
            `;
            showUniversalModal('Field Data Entry', bodyHTML);
        }

        // Leave Application Modal
        function applyLeave() {
            const bodyHTML = `
                <div class="form-info">Apply for leave - subject to manager approval</div>

                <div class="form-group">
                    <label class="required">Leave Type</label>
                    <select class="form-control">
                        <option>Select Leave Type</option>
                        <option>Casual Leave</option>
                        <option>Sick Leave</option>
                        <option>Privilege Leave</option>
                        <option>Maternity Leave</option>
                        <option>Compensatory Off</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">From Date</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">To Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <div style="padding: 12px; background: #f7fafc; border-radius: 6px; margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; font-size: 14px;">
                            <span>Total Days:</span>
                            <span style="font-weight: 600;">0 days</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px; margin-top: 4px;">
                            <span>Available Balance:</span>
                            <span style="font-weight: 600; color: #48bb78;">15.5 days</span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Reason for Leave</label>
                    <textarea class="form-control" placeholder="Enter reason for leave application..."></textarea>
                </div>

                <div class="form-group">
                    <label>Contact During Leave</label>
                    <input type="text" class="form-control" placeholder="Phone number or email">
                </div>

                <div class="form-group">
                    <label>Attach Document (if medical leave)</label>
                    <div class="file-upload-area" onclick="document.getElementById('leaveDoc').click()">
                        <input type="file" id="leaveDoc" accept="image/*,application/pdf">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload medical certificate (optional)</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Apply for Leave', bodyHTML);
        }

        // IT Support Ticket Modal
        function raiseITTicket() {
            const bodyHTML = `
                <div class="form-info">Raise an IT support request for technical assistance</div>

                <div class="form-group">
                    <label class="required">Issue Category</label>
                    <select class="form-control">
                        <option>Select Category</option>
                        <option>Hardware Issue - Laptop/Desktop</option>
                        <option>Hardware Issue - Printer/Scanner</option>
                        <option>Software Installation</option>
                        <option>Network/Internet Problem</option>
                        <option>Email/Access Issues</option>
                        <option>Password Reset</option>
                        <option>Other</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Priority</label>
                        <select class="form-control">
                            <option>Low</option>
                            <option>Medium</option>
                            <option selected>High</option>
                            <option>Critical</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Asset ID (if applicable)</label>
                        <input type="text" class="form-control" placeholder="e.g., IT-2024-045">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Issue Description</label>
                    <textarea class="form-control" placeholder="Describe the issue in detail..." style="min-height: 100px;"></textarea>
                </div>

                <div class="form-group">
                    <label>Attach Screenshots (if any)</label>
                    <div class="file-upload-area" onclick="document.getElementById('itScreenshots').click()">
                        <input type="file" id="itScreenshots" multiple accept="image/*">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload screenshots of the issue</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Raise IT Support Ticket', bodyHTML);
        }

        // ============================================
        // EMPLOYEE MANAGEMENT MODALS
        // ============================================

        function showAddEmployeeForm() {
            const bodyHTML = `
                <div class="form-info">Onboard a new employee with complete details</div>

                <div class="form-section-title">Personal Information</div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">First Name</label>
                        <input type="text" class="form-control" placeholder="Enter first name">
                    </div>
                    <div class="form-group">
                        <label class="required">Last Name</label>
                        <input type="text" class="form-control" placeholder="Enter last name">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Email</label>
                        <input type="email" class="form-control" placeholder="employee@fwwbindia.org">
                    </div>
                    <div class="form-group">
                        <label class="required">Mobile Number</label>
                        <input type="tel" class="form-control" placeholder="+91-XXXXXXXXXX">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Date of Birth</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">Gender</label>
                        <select class="form-control">
                            <option>Select Gender</option>
                            <option>Male</option>
                            <option>Female</option>
                            <option>Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-section-title">Employment Details</div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Employee ID</label>
                        <input type="text" class="form-control" placeholder="Auto-generated or Enter ID">
                    </div>
                    <div class="form-group">
                        <label class="required">Date of Joining</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Department</label>
                        <select class="form-control">
                            <option>Select Department</option>
                            <option>Program Management</option>
                            <option>Human Resources</option>
                            <option>Finance & Accounts</option>
                            <option>Administration</option>
                            <option>IT & Technology</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Designation</label>
                        <input type="text" class="form-control" placeholder="Enter designation">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Reporting Manager</label>
                        <select class="form-control">
                            <option>Select Manager</option>
                            <option>Rajesh Kumar - Program Director</option>
                            <option>Priya Sharma - HR Head</option>
                            <option>Amit Patel - Finance Manager</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Employment Type</label>
                        <select class="form-control">
                            <option>Permanent</option>
                            <option>Contract</option>
                            <option>Consultant</option>
                            <option>Intern</option>
                        </select>
                    </div>
                </div>

                <div class="form-section-title">Bank Details</div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Bank Name</label>
                        <input type="text" class="form-control" placeholder="Enter bank name">
                    </div>
                    <div class="form-group">
                        <label class="required">Account Number</label>
                        <input type="text" class="form-control" placeholder="Enter account number">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">IFSC Code</label>
                        <input type="text" class="form-control" placeholder="Enter IFSC code">
                    </div>
                    <div class="form-group">
                        <label class="required">PAN Number</label>
                        <input type="text" class="form-control" placeholder="Enter PAN">
                    </div>
                </div>

                <div class="form-section-title">Documents</div>
                <div class="form-group">
                    <label>Upload Documents (Resume, ID Proof, Address Proof, Educational Certificates)</label>
                    <div class="file-upload-area" onclick="document.getElementById('employeeDocs').click()">
                        <input type="file" id="employeeDocs" multiple accept=".pdf,.jpg,.png">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload employee documents</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Add New Employee', bodyHTML);
        }

        function showBulkUploadEmployeesForm() {
            const bodyHTML = `
                <div class="form-info">Upload multiple employees at once using Excel template</div>

                <div class="form-group">
                    <label>Step 1: Download Excel Template</label>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 8px;">
                        ↓ Download Employee Template.xlsx
                    </button>
                </div>

                <div class="form-group">
                    <label class="required">Step 2: Upload Filled Template</label>
                    <div class="file-upload-area" onclick="document.getElementById('employeeExcel').click()">
                        <input type="file" id="employeeExcel" accept=".xlsx,.xls">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload filled Excel file with employee data</div>
                            <div style="font-size: 12px; margin-top: 8px;">Accepted formats: .xlsx, .xls</div>
                        </div>
                    </div>
                </div>

                <div class="form-info" style="background: #FFF3CD; border-left: 4px solid #FFC107; padding: 12px; margin-top: 16px;">
                    <strong>Instructions:</strong>
                    <ul style="margin: 8px 0 0 20px; font-size: 13px;">
                        <li>Download the template and fill in all required fields</li>
                        <li>Do not modify column headers</li>
                        <li>Use DD/MM/YYYY format for dates</li>
                        <li>Ensure email addresses are unique</li>
                        <li>Maximum 100 employees per upload</li>
                    </ul>
                </div>
            `;
            showUniversalModal('Bulk Upload Employees', bodyHTML);
        }

        // ============================================
        // RECRUITMENT MODALS
        // ============================================

        function showCreateJobPostingForm() {
            const bodyHTML = `
                <div class="form-info">Create and publish a new job opening</div>

                <div class="form-group">
                    <label class="required">Job Title</label>
                    <input type="text" class="form-control" placeholder="e.g., Program Manager - Microfinance">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Department</label>
                        <select class="form-control">
                            <option>Select Department</option>
                            <option>Program Management</option>
                            <option>Human Resources</option>
                            <option>Finance & Accounts</option>
                            <option>Administration</option>
                            <option>IT & Technology</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Location</label>
                        <input type="text" class="form-control" placeholder="e.g., Ahmedabad, Gujarat">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Employment Type</label>
                        <select class="form-control">
                            <option>Permanent</option>
                            <option>Contract</option>
                            <option>Consultant</option>
                            <option>Intern</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Number of Positions</label>
                        <input type="number" class="form-control" placeholder="Number of openings" value="1">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Experience Required (Years)</label>
                        <input type="text" class="form-control" placeholder="e.g., 3-5 years">
                    </div>
                    <div class="form-group">
                        <label class="required">Salary Range</label>
                        <input type="text" class="form-control" placeholder="e.g., ₹5-7 LPA">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Job Description</label>
                    <textarea class="form-control" rows="4" placeholder="Describe the role, responsibilities, and key objectives..."></textarea>
                </div>

                <div class="form-group">
                    <label class="required">Required Qualifications</label>
                    <textarea class="form-control" rows="3" placeholder="List educational qualifications and certifications..."></textarea>
                </div>

                <div class="form-group">
                    <label class="required">Key Skills Required</label>
                    <input type="text" class="form-control" placeholder="e.g., Project Management, Financial Analysis, Microfinance">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Application Deadline</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">Publish Status</label>
                        <select class="form-control">
                            <option>Draft</option>
                            <option>Published</option>
                        </select>
                    </div>
                </div>
            `;
            showUniversalModal('Create Job Posting', bodyHTML);
        }

        function showViewApplicationsForm() {
            const bodyHTML = `
                <div class="form-info">Filter and view job applications</div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Job Posting</label>
                        <select class="form-control">
                            <option>All Job Postings</option>
                            <option>Program Manager - Microfinance</option>
                            <option>HR Executive</option>
                            <option>Finance Officer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Application Status</label>
                        <select class="form-control">
                            <option>All Statuses</option>
                            <option>New</option>
                            <option>Shortlisted</option>
                            <option>Interview Scheduled</option>
                            <option>Selected</option>
                            <option>Rejected</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>From Date</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>To Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div style="margin-top: 24px; padding: 16px; background: #F7FAFC; border-radius: 8px;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Quick Stats:</div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                        <div style="background: white; padding: 12px; border-radius: 6px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #2E3192;">45</div>
                            <div style="font-size: 12px; color: #718096;">Total Applications</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 6px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #1BADE3;">12</div>
                            <div style="font-size: 12px; color: #718096;">Shortlisted</div>
                        </div>
                        <div style="background: white; padding: 12px; border-radius: 6px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #48BB78;">3</div>
                            <div style="font-size: 12px; color: #718096;">Selected</div>
                        </div>
                    </div>
                </div>
            `;
            const footerHTML = `
                <button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>
                <button class="btn btn-primary" onclick="alert('Applying filters...'); closeUniversalModal();">Apply Filters</button>
            `;
            showUniversalModal('View Applications', bodyHTML, footerHTML);
        }

        // ============================================
        // ATTENDANCE MODALS
        // ============================================

        function showManualAttendanceForm() {
            const bodyHTML = `
                <div class="form-info">Mark attendance manually for employees</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Date</label>
                        <input type="date" class="form-control" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-group">
                        <label class="required">Department</label>
                        <select class="form-control">
                            <option>All Departments</option>
                            <option>Program Management</option>
                            <option>Human Resources</option>
                            <option>Finance & Accounts</option>
                            <option>Administration</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Select Employees</label>
                    <div style="max-height: 200px; overflow-y: auto; border: 1px solid #cbd5e0; border-radius: 6px; padding: 8px;">
                        <label style="display: block; padding: 8px; cursor: pointer; border-bottom: 1px solid #f7fafc;">
                            <input type="checkbox"> <strong>Select All</strong>
                        </label>
                        <label style="display: block; padding: 8px; cursor: pointer;">
                            <input type="checkbox"> Rajesh Kumar (EMP001) - Program Manager
                        </label>
                        <label style="display: block; padding: 8px; cursor: pointer;">
                            <input type="checkbox"> Priya Sharma (EMP002) - HR Executive
                        </label>
                        <label style="display: block; padding: 8px; cursor: pointer;">
                            <input type="checkbox"> Amit Patel (EMP003) - Finance Officer
                        </label>
                        <label style="display: block; padding: 8px; cursor: pointer;">
                            <input type="checkbox"> Sneha Desai (EMP004) - Program Coordinator
                        </label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Check-In Time</label>
                        <input type="time" class="form-control" value="09:30">
                    </div>
                    <div class="form-group">
                        <label>Check-Out Time</label>
                        <input type="time" class="form-control" value="18:00">
                    </div>
                </div>

                <div class="form-group">
                    <label>Notes/Remarks</label>
                    <textarea class="form-control" rows="2" placeholder="Any special notes about this attendance entry..."></textarea>
                </div>
            `;
            showUniversalModal('Manual Attendance Entry', bodyHTML);
        }

        function showMarkAttendanceForm() {
            const bodyHTML = `
                <div class="form-info">Mark your attendance with GPS location</div>

                <div class="form-group">
                    <label>Current Date & Time</label>
                    <input type="text" class="form-control" value="${new Date().toLocaleString()}" readonly>
                </div>

                <div class="form-group">
                    <label>Location</label>
                    <button class="btn btn-secondary" style="width: 100%;" onclick="captureGPSLocation()">
                        ● Capture GPS Location
                    </button>
                    <div id="gpsLocation" style="margin-top: 8px; font-size: 13px; color: #718096;"></div>
                </div>

                <div class="form-group">
                    <label>Attendance Type</label>
                    <select class="form-control">
                        <option>Office</option>
                        <option>Work From Home</option>
                        <option>Field Visit</option>
                        <option>Client Meeting</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Remarks (Optional)</label>
                    <textarea class="form-control" rows="2" placeholder="Any additional notes..."></textarea>
                </div>

                <div style="margin-top: 16px; padding: 12px; background: #EDF2F7; border-radius: 6px; font-size: 13px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span>Today's Status:</span>
                        <strong style="color: #48BB78;">Not Marked</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Last Check-In:</span>
                        <strong>--:--</strong>
                    </div>
                </div>
            `;
            const footerHTML = `
                <button class="btn btn-secondary" onclick="closeUniversalModal()">Cancel</button>
                <button class="btn btn-primary" onclick="alert('Attendance marked successfully!'); closeUniversalModal();">
                    ● Mark Check-In
                </button>
            `;
            showUniversalModal('Mark Attendance', bodyHTML, footerHTML);
        }

        // ============================================
        // PERFORMANCE MODALS
        // ============================================

        function showSetKPIsForm() {
            const bodyHTML = `
                <div class="form-info">Define Key Performance Indicators for employees</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Employee</label>
                        <select class="form-control">
                            <option>Select Employee</option>
                            <option>Rajesh Kumar - Program Manager</option>
                            <option>Priya Sharma - HR Executive</option>
                            <option>Amit Patel - Finance Officer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Review Period</label>
                        <select class="form-control">
                            <option>Q1 2024 (Jan-Mar)</option>
                            <option>Q2 2024 (Apr-Jun)</option>
                            <option>Q3 2024 (Jul-Sep)</option>
                            <option>Q4 2024 (Oct-Dec)</option>
                            <option>Annual 2024</option>
                        </select>
                    </div>
                </div>

                <div class="form-section-title">KPIs (Add Multiple)</div>

                <div class="form-group">
                    <label class="required">KPI Name</label>
                    <input type="text" class="form-control" placeholder="e.g., Project Delivery Rate">
                </div>

                <div class="form-group">
                    <label class="required">Description</label>
                    <textarea class="form-control" rows="2" placeholder="Describe what this KPI measures..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Target Value</label>
                        <input type="text" class="form-control" placeholder="e.g., 95% or 10 projects">
                    </div>
                    <div class="form-group">
                        <label class="required">Weight (%)</label>
                        <input type="number" class="form-control" placeholder="20" max="100">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Measurement Criteria</label>
                    <textarea class="form-control" rows="2" placeholder="How will this KPI be measured and evaluated?"></textarea>
                </div>

                <button class="btn btn-secondary" style="width: 100%; margin-top: 12px;">
                    + Add Another KPI
                </button>

                <div style="margin-top: 16px; padding: 12px; background: #FFF3CD; border-left: 4px solid #FFC107; font-size: 13px;">
                    <strong>Note:</strong> Total weight of all KPIs should equal 100%
                </div>
            `;
            showUniversalModal('Set KPIs', bodyHTML);
        }



        // ============================================
        // PAYROLL MODALS
        // ============================================

        function showProcessPayrollForm() {
            const bodyHTML = `
                <div class="form-info">Process monthly payroll for employees</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Payroll Month</label>
                        <select class="form-control">
                            <option>December 2024</option>
                            <option>November 2024</option>
                            <option>October 2024</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Payment Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Department</label>
                    <select class="form-control">
                        <option>All Departments</option>
                        <option>Program Management</option>
                        <option>Human Resources</option>
                        <option>Finance & Accounts</option>
                        <option>Administration</option>
                    </select>
                </div>

                <div style="margin: 20px 0; padding: 16px; background: #F7FAFC; border-radius: 8px;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Payroll Summary:</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div>
                            <div style="font-size: 12px; color: #718096;">Total Employees</div>
                            <div style="font-size: 20px; font-weight: bold; color: #2E3192;">45</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #718096;">Gross Salary</div>
                            <div style="font-size: 20px; font-weight: bold; color: #2E3192;">₹28,50,000</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #718096;">Total Deductions</div>
                            <div style="font-size: 20px; font-weight: bold; color: #E53E3E;">₹4,25,000</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #718096;">Net Payable</div>
                            <div style="font-size: 20px; font-weight: bold; color: #48BB78;">₹24,25,000</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Include Components:</label>
                    <div style="padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Basic Salary
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox" checked> HRA
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Allowances
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Overtime
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox" checked> Deductions (PF, ESI, TDS, PT)
                        </label>
                    </div>
                </div>

                <div style="margin-top: 16px; padding: 12px; background: #FFF3CD; border-left: 4px solid #FFC107; font-size: 13px;">
                    <strong>Note:</strong> Please verify attendance and leave data before processing payroll
                </div>
            `;
            const footerHTML = `
                <button class="btn btn-secondary" onclick="closeUniversalModal()">Cancel</button>
                <button class="btn btn-primary" onclick="alert('Processing payroll...'); closeUniversalModal();">
                    Process Payroll
                </button>
            `;
            showUniversalModal('Process Monthly Payroll', bodyHTML, footerHTML);
        }

        function showGeneratePayslipsForm() {
            const bodyHTML = `
                <div class="form-info">Generate and distribute salary slips</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Salary Month</label>
                        <select class="form-control">
                            <option>December 2024</option>
                            <option>November 2024</option>
                            <option>October 2024</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Department</label>
                        <select class="form-control">
                            <option>All Departments</option>
                            <option>Program Management</option>
                            <option>Human Resources</option>
                            <option>Finance & Accounts</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Select Employees (Leave blank for all)</label>
                    <div style="max-height: 150px; overflow-y: auto; border: 1px solid #cbd5e0; border-radius: 6px; padding: 8px;">
                        <label style="display: block; padding: 6px; cursor: pointer; border-bottom: 1px solid #f7fafc;">
                            <input type="checkbox"> <strong>Select All (45 employees)</strong>
                        </label>
                        <label style="display: block; padding: 6px; cursor: pointer;">
                            <input type="checkbox" checked> Rajesh Kumar (EMP001)
                        </label>
                        <label style="display: block; padding: 6px; cursor: pointer;">
                            <input type="checkbox" checked> Priya Sharma (EMP002)
                        </label>
                        <label style="display: block; padding: 6px; cursor: pointer;">
                            <input type="checkbox" checked> Amit Patel (EMP003)
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Distribution Method</label>
                    <div style="padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="radio" name="distribution" checked> Email to employees
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="radio" name="distribution"> Download ZIP file
                        </label>
                        <label style="display: block; cursor: pointer;">
                            <input type="radio" name="distribution"> Both
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Email Subject</label>
                    <input type="text" class="form-control" value="Salary Slip - December 2024" placeholder="Customize email subject">
                </div>

                <div class="form-group">
                    <label>Email Message</label>
                    <textarea class="form-control" rows="3" placeholder="Dear Employee, Please find attached your salary slip for December 2024..."></textarea>
                </div>
            `;
            const footerHTML = `
                <button class="btn btn-secondary" onclick="closeUniversalModal()">Cancel</button>
                <button class="btn btn-primary" onclick="alert('Generating payslips...'); closeUniversalModal();">
                    Generate & Send
                </button>
            `;
            showUniversalModal('Generate Salary Slips', bodyHTML, footerHTML);
        }

        function showStatutoryReportsForm() {
            const bodyHTML = `
                <div class="form-info">Generate statutory compliance reports (PF, ESI, TDS, PT)</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Report Type</label>
                        <select class="form-control">
                            <option>PF (Provident Fund) Report</option>
                            <option>ESI (Employee State Insurance) Report</option>
                            <option>TDS (Tax Deducted at Source) Report</option>
                            <option>PT (Professional Tax) Report</option>
                            <option>Form 16 (Annual TDS Certificate)</option>
                            <option>Bonus Statement</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Period</label>
                        <select class="form-control">
                            <option>December 2024</option>
                            <option>Q3 2024 (Oct-Dec)</option>
                            <option>FY 2024-25</option>
                            <option>Custom Date Range</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Report Format</label>
                    <div style="padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="radio" name="format" checked> Excel (.xlsx)
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="radio" name="format"> PDF
                        </label>
                        <label style="display: block; cursor: pointer;">
                            <input type="radio" name="format"> CSV
                        </label>
                    </div>
                </div>

                <div style="margin: 20px 0; padding: 16px; background: #EDF2F7; border-radius: 8px; font-size: 13px;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Report will include:</div>
                    <ul style="margin: 0; padding-left: 20px;">
                        <li>Employee-wise contribution details</li>
                        <li>Employer contribution breakdown</li>
                        <li>Total payable amount</li>
                        <li>Challan generation details</li>
                        <li>Monthly summary</li>
                    </ul>
                </div>

                <div class="form-group">
                    <label>Additional Options</label>
                    <div style="padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox"> Include resigned employees
                        </label>
                        <label style="display: block; cursor: pointer;">
                            <input type="checkbox"> Group by department
                        </label>
                    </div>
                </div>
            `;
            const footerHTML = `
                <button class="btn btn-secondary" onclick="closeUniversalModal()">Cancel</button>
                <button class="btn btn-primary" onclick="alert('Generating statutory report...'); closeUniversalModal();">
                    ↓ Generate Report
                </button>
            `;
            showUniversalModal('Generate Statutory Report', bodyHTML, footerHTML);
        }

        // ============================================
        // EXIT MANAGEMENT MODALS
        // ============================================




        // ============================================
        // ASSET MANAGEMENT MODALS
        // ============================================

        function showAddAssetForm() {
            const bodyHTML = `
                <div class="form-info">Add new asset to inventory</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Asset Type</label>
                        <select class="form-control">
                            <option>Select Type</option>
                            <option>IT Asset</option>
                            <option>Non-IT Asset</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Asset Category</label>
                        <select class="form-control">
                            <option>Select Category</option>
                            <option>Laptop</option>
                            <option>Desktop</option>
                            <option>Mobile/Tablet</option>
                            <option>Printer/Scanner</option>
                            <option>Furniture</option>
                            <option>Vehicle</option>
                            <option>Other Equipment</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Asset ID</label>
                        <input type="text" class="form-control" placeholder="Auto-generated or Enter ID">
                    </div>
                    <div class="form-group">
                        <label class="required">Asset Name</label>
                        <input type="text" class="form-control" placeholder="e.g., Dell Latitude 5420">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Brand/Make</label>
                        <input type="text" class="form-control" placeholder="e.g., Dell">
                    </div>
                    <div class="form-group">
                        <label class="required">Model Number</label>
                        <input type="text" class="form-control" placeholder="Enter model number">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Serial Number</label>
                        <input type="text" class="form-control" placeholder="Enter serial number">
                    </div>
                    <div class="form-group">
                        <label class="required">Purchase Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Purchase Cost</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label class="required">Vendor/Supplier</label>
                        <input type="text" class="form-control" placeholder="Enter vendor name">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Warranty Expiry Date</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">Location</label>
                        <select class="form-control">
                            <option>Ahmedabad Office</option>
                            <option>Delhi Office</option>
                            <option>Mumbai Office</option>
                            <option>Field Office</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Additional Specifications</label>
                    <textarea class="form-control" rows="2" placeholder="e.g., RAM: 16GB, Storage: 512GB SSD, etc."></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Documents (Invoice, Warranty Card)</label>
                    <div class="file-upload-area" onclick="document.getElementById('assetDocs').click()">
                        <input type="file" id="assetDocs" multiple accept=".pdf,.jpg,.png">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload asset documents</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Add New Asset', bodyHTML);
        }

        function showAssignAssetForm() {
            const bodyHTML = `
                <div class="form-info">Assign asset to employee</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Asset ID</label>
                        <select class="form-control">
                            <option>Select Asset</option>
                            <option>FWWB-LAP-001 - Dell Latitude 5420</option>
                            <option>FWWB-LAP-002 - HP EliteBook 840</option>
                            <option>FWWB-MOB-001 - iPhone 13</option>
                            <option>FWWB-DES-001 - Dell OptiPlex 7090</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Assign To Employee</label>
                        <select class="form-control">
                            <option>Select Employee</option>
                            <option>Rajesh Kumar (EMP001)</option>
                            <option>Priya Sharma (EMP002)</option>
                            <option>Amit Patel (EMP003)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Assignment Date</label>
                        <input type="date" class="form-control" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                    <div class="form-group">
                        <label>Expected Return Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Asset Condition</label>
                    <select class="form-control">
                        <option>Excellent</option>
                        <option>Good</option>
                        <option>Fair</option>
                        <option>Needs Repair</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Assignment Purpose</label>
                    <textarea class="form-control" rows="2" placeholder="Reason for asset assignment..."></textarea>
                </div>

                <div class="form-group">
                    <label>Terms & Conditions</label>
                    <div style="padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px; max-height: 120px; overflow-y: auto; font-size: 13px; background: #F7FAFC;">
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox"> Employee is responsible for asset safekeeping
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox"> Asset must be returned upon resignation/termination
                        </label>
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox"> Damage/loss will be recovered from employee
                        </label>
                        <label style="display: block; cursor: pointer;">
                            <input type="checkbox"> Asset is for official use only
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Upload Handover Form (if applicable)</label>
                    <div class="file-upload-area" onclick="document.getElementById('handoverForm').click()">
                        <input type="file" id="handoverForm" accept=".pdf,.jpg,.png">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload signed handover document</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Assign Asset to Employee', bodyHTML);
        }

        function showBulkUploadAssetsForm() {
            const bodyHTML = `
                <div class="form-info">Upload multiple assets at once using Excel template</div>

                <div class="form-group">
                    <label>Step 1: Download Excel Template</label>
                    <button class="btn btn-secondary" style="width: 100%; margin-top: 8px;">
                        ↓ Download Asset Template.xlsx
                    </button>
                </div>

                <div class="form-group">
                    <label class="required">Step 2: Upload Filled Template</label>
                    <div class="file-upload-area" onclick="document.getElementById('assetExcel').click()">
                        <input type="file" id="assetExcel" accept=".xlsx,.xls">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload filled Excel file with asset data</div>
                            <div style="font-size: 12px; margin-top: 8px;">Accepted formats: .xlsx, .xls</div>
                        </div>
                    </div>
                </div>

                <div class="form-info" style="background: #FFF3CD; border-left: 4px solid #FFC107; padding: 12px; margin-top: 16px;">
                    <strong>Template Columns:</strong>
                    <ul style="margin: 8px 0 0 20px; font-size: 13px;">
                        <li>Asset ID, Asset Type, Category, Brand, Model</li>
                        <li>Serial Number, Purchase Date, Purchase Cost</li>
                        <li>Vendor, Warranty Expiry, Location</li>
                        <li>Specifications (optional)</li>
                    </ul>
                </div>
            `;
            showUniversalModal('Bulk Upload Assets', bodyHTML);
        }

        // ============================================
        // INSURANCE MANAGEMENT MODALS
        // ============================================

        function showAddPolicyForm() {
            const bodyHTML = `
                <div class="form-info">Add new insurance policy</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Policy Type</label>
                        <select class="form-control">
                            <option>Select Type</option>
                            <option>Group Medical Insurance</option>
                            <option>Group Accident Insurance</option>
                            <option>Vehicle Insurance</option>
                            <option>Fire & Safety Insurance</option>
                            
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Policy Number</label>
                        <input type="text" class="form-control" placeholder="Enter policy number">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Insurance Company</label>
                        <input type="text" class="form-control" placeholder="e.g., HDFC ERGO, ICICI Lombard">
                    </div>
                    <div class="form-group">
                        <label class="required">Policy Name</label>
                        <input type="text" class="form-control" placeholder="Enter policy name">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Start Date</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">Expiry Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Sum Insured</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label class="required">Premium Amount</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Payment Frequency</label>
                        <select class="form-control">
                            <option>Annual</option>
                            <option>Semi-Annual</option>
                            <option>Quarterly</option>
                            <option>Monthly</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Coverage</label>
                        <input type="text" class="form-control" placeholder="e.g., Self + Family, All Employees">
                    </div>
                </div>

                <div class="form-group">
                    <label>Policy Features/Coverage Details</label>
                    <textarea class="form-control" rows="3" placeholder="List key features, inclusions, exclusions..."></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Policy Document</label>
                    <div class="file-upload-area" onclick="document.getElementById('policyDoc').click()">
                        <input type="file" id="policyDoc" accept=".pdf">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload insurance policy PDF</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Renewal Alert (days before expiry)</label>
                    <input type="number" class="form-control" value="30" placeholder="Number of days">
                </div>
            `;
            showUniversalModal('Add Insurance Policy', bodyHTML);
        }

        function showRenewPolicyForm() {
            const bodyHTML = `
                <div class="form-info">Renew existing insurance policy</div>

                <div class="form-group">
                    <label class="required">Select Policy to Renew</label>
                    <select class="form-control">
                        <option>Select Policy</option>
                        <option>Group Medical - HDFC ERGO (Expiring: 31-Jan-2025)</option>
                        <option>Vehicle Insurance - ICICI Lombard (Expiring: 15-Feb-2025)</option>
                        <option>Fire & Safety - New India Assurance (Expiring: 28-Feb-2025)</option>
                    </select>
                </div>

                <div style="margin: 16px 0; padding: 16px; background: #EDF2F7; border-radius: 8px; font-size: 13px;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Current Policy Details:</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                        <div><strong>Policy Number:</strong> HDFC-GRP-2024-001</div>
                        <div><strong>Expiry Date:</strong> 31-Jan-2025</div>
                        <div><strong>Sum Insured:</strong> ₹10,00,000</div>
                        <div><strong>Premium:</strong> ₹2,50,000</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">New Start Date</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">New Expiry Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">New Sum Insured</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label class="required">New Premium Amount</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                </div>

                <div class="form-group">
                    <label>Changes in Coverage (if any)</label>
                    <textarea class="form-control" rows="2" placeholder="Describe any changes in coverage, features, or terms..."></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Renewed Policy Document</label>
                    <div class="file-upload-area" onclick="document.getElementById('renewedPolicy').click()">
                        <input type="file" id="renewedPolicy" accept=".pdf">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload renewed policy PDF</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Upload Payment Receipt</label>
                    <div class="file-upload-area" onclick="document.getElementById('paymentReceipt').click()">
                        <input type="file" id="paymentReceipt" accept=".pdf,.jpg,.png">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload premium payment receipt</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Renew Insurance Policy', bodyHTML);
        }

        // ============================================
        // TRAVEL MANAGEMENT MODALS
        // ============================================

        function showRequestTravelForm() {
            const bodyHTML = `
                <div class="form-info">Submit travel request for official trip</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Travel Type</label>
                        <select class="form-control">
                            <option>Select Type</option>
                            <option>Domestic - Flight</option>
                            <option>Domestic - Train</option>
                            <option>Domestic - Bus</option>
                            <option>International</option>
                            <option>Local Travel</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Purpose</label>
                        <input type="text" class="form-control" placeholder="e.g., Project Review Meeting">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">From Location</label>
                        <input type="text" class="form-control" placeholder="e.g., Ahmedabad">
                    </div>
                    <div class="form-group">
                        <label class="required">To Location</label>
                        <input type="text" class="form-control" placeholder="e.g., Delhi">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Departure Date</label>
                        <input type="date" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">Return Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Travel Class</label>
                        <select class="form-control">
                            <option>Economy</option>
                            <option>Business</option>
                            <option>AC 2-Tier</option>
                            <option>AC 3-Tier</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Estimated Cost</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                </div>

                <div class="form-group">
                    <label>Accommodation Required?</label>
                    <div style="padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px;">
                        <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                            <input type="radio" name="accommodation" checked> Yes
                        </label>
                        <label style="display: block; cursor: pointer;">
                            <input type="radio" name="accommodation"> No
                        </label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Number of Nights</label>
                        <input type="number" class="form-control" placeholder="Number of nights">
                    </div>
                    <div class="form-group">
                        <label>Hotel Budget/Night</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Project/Activity</label>
                    <select class="form-control">
                        <option>Select Project</option>
                        <option>Women Entrepreneurship - Delhi</option>
                        <option>Financial Literacy - Mumbai</option>
                        <option>Microfinance Support - Bangalore</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Advance Required?</label>
                    <input type="number" class="form-control" placeholder="₹ Advance amount (if needed)">
                </div>

                <div class="form-group">
                    <label>Additional Details</label>
                    <textarea class="form-control" rows="2" placeholder="Any special requirements or additional information..."></textarea>
                </div>
            `;
            showUniversalModal('Submit Travel Request', bodyHTML);
        }

        function showBookTicketsForm() {
            const bodyHTML = `
                <div class="form-info">Book tickets for approved travel request</div>

                <div class="form-group">
                    <label class="required">Select Travel Request</label>
                    <select class="form-control">
                        <option>Select Request</option>
                        <option>TR-001 - Rajesh Kumar - Ahmedabad to Delhi (15-Jan to 18-Jan)</option>
                        <option>TR-002 - Priya Sharma - Mumbai Project Visit (20-Jan to 22-Jan)</option>
                        <option>TR-003 - Amit Patel - Bangalore Meeting (25-Jan to 26-Jan)</option>
                    </select>
                </div>

                <div style="margin: 16px 0; padding: 16px; background: #EDF2F7; border-radius: 8px; font-size: 13px;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Travel Request Details:</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                        <div><strong>Employee:</strong> Rajesh Kumar</div>
                        <div><strong>Mode:</strong> Flight</div>
                        <div><strong>From:</strong> Ahmedabad</div>
                        <div><strong>To:</strong> Delhi</div>
                        <div><strong>Departure:</strong> 15-Jan-2025</div>
                        <div><strong>Return:</strong> 18-Jan-2025</div>
                        <div><strong>Budget:</strong> ₹12,000</div>
                        <div><strong>Status:</strong> Approved</div>
                    </div>
                </div>

                <div class="form-section-title">Flight/Train Details</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Flight/Train Number</label>
                        <input type="text" class="form-control" placeholder="e.g., 6E-453 or 12927">
                    </div>
                    <div class="form-group">
                        <label class="required">Booking Reference/PNR</label>
                        <input type="text" class="form-control" placeholder="Enter PNR/Booking Ref">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Departure Time</label>
                        <input type="time" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="required">Arrival Time</label>
                        <input type="time" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Ticket Cost</label>
                        <input type="number" class="form-control" placeholder="₹ Amount">
                    </div>
                    <div class="form-group">
                        <label class="required">Booking Platform</label>
                        <select class="form-control">
                            <option>Travel Agent</option>
                            <option>MakeMyTrip</option>
                            <option>Cleartrip</option>
                            <option>IRCTC</option>
                            <option>Direct Airline</option>
                        </select>
                    </div>
                </div>

                <div class="form-section-title">Hotel Booking (if applicable)</div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Hotel Name</label>
                        <input type="text" class="form-control" placeholder="Enter hotel name">
                    </div>
                    <div class="form-group">
                        <label>Booking Reference</label>
                        <input type="text" class="form-control" placeholder="Enter booking reference">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Hotel Cost</label>
                        <input type="number" class="form-control" placeholder="₹ Total amount">
                    </div>
                    <div class="form-group">
                        <label>Check-in / Check-out</label>
                        <input type="text" class="form-control" placeholder="e.g., 15-Jan to 18-Jan">
                    </div>
                </div>

                <div class="form-group">
                    <label>Upload Ticket/Booking Confirmation</label>
                    <div class="file-upload-area" onclick="document.getElementById('ticketDoc').click()">
                        <input type="file" id="ticketDoc" multiple accept=".pdf,.jpg,.png">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload tickets and hotel booking confirmation</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Book Travel Tickets', bodyHTML);
        }

        // ============================================
        // STATIONERY MANAGEMENT MODALS
        // ============================================

        function showRequestStationeryForm() {
            const bodyHTML = `
                <div class="form-info">Request stationery items for your department</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Department</label>
                        <select class="form-control">
                            <option>Select Department</option>
                            <option>Program Management</option>
                            <option>Human Resources</option>
                            <option>Finance & Accounts</option>
                            <option>Administration</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Required By Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-section-title">Items Requested (Add Multiple)</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Item Name</label>
                        <select class="form-control">
                            <option>Select Item</option>
                            <option>A4 Paper (Ream)</option>
                            <option>Pens (Box of 50)</option>
                            <option>Pencils (Box of 50)</option>
                            <option>Markers</option>
                            <option>Staplers</option>
                            <option>Stapler Pins</option>
                            <option>File Folders</option>
                            <option>Notepads</option>
                            <option>Sticky Notes</option>
                            <option>Envelopes</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Quantity</label>
                        <input type="number" class="form-control" placeholder="Quantity needed">
                    </div>
                </div>

                <button class="btn btn-secondary" style="width: 100%; margin-top: 12px;">
                    + Add Another Item
                </button>

                <div style="margin-top: 20px; padding: 16px; background: #F7FAFC; border-radius: 8px;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Items Added:</div>
                    <div style="font-size: 13px; color: #718096;">
                        <div style="padding: 8px; background: white; border-radius: 4px; margin-bottom: 8px; display: flex; justify-content: space-between;">
                            <span>A4 Paper (Ream) × 5</span>
                            <span style="cursor: pointer; color: #E53E3E;">✕</span>
                        </div>
                        <div style="padding: 8px; background: white; border-radius: 4px; margin-bottom: 8px; display: flex; justify-content: space-between;">
                            <span>Pens (Box of 50) × 2</span>
                            <span style="cursor: pointer; color: #E53E3E;">✕</span>
                        </div>
                        <div style="padding: 8px; background: white; border-radius: 4px; display: flex; justify-content: space-between;">
                            <span>File Folders × 20</span>
                            <span style="cursor: pointer; color: #E53E3E;">✕</span>
                        </div>
                    </div>
                </div>

                <div class="form-group" style="margin-top: 16px;">
                    <label>Purpose/Justification</label>
                    <textarea class="form-control" rows="2" placeholder="Explain why these items are needed..."></textarea>
                </div>
            `;
            showUniversalModal('Request Stationery', bodyHTML);
        }

        function showFulfillRequestForm() {
            const bodyHTML = `
                <div class="form-info">Fulfill stationery request and update stock</div>

                <div class="form-group">
                    <label class="required">Select Request</label>
                    <select class="form-control">
                        <option>Select Request</option>
                        <option>REQ-001 - Program Dept - Submitted on 10-Dec (Pending)</option>
                        <option>REQ-002 - HR Dept - Submitted on 12-Dec (Pending)</option>
                        <option>REQ-003 - Finance Dept - Submitted on 15-Dec (Pending)</option>
                    </select>
                </div>

                <div style="margin: 16px 0; padding: 16px; background: #EDF2F7; border-radius: 8px; font-size: 13px;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Request Details:</div>
                    <div style="margin-bottom: 8px;"><strong>Requested By:</strong> Rajesh Kumar (Program Management)</div>
                    <div style="margin-bottom: 8px;"><strong>Date:</strong> 10-Dec-2024</div>
                    <div style="margin-bottom: 12px;"><strong>Required By:</strong> 20-Dec-2024</div>
                    <div style="font-weight: 500; margin-bottom: 8px;">Items:</div>
                    <ul style="margin: 0; padding-left: 20px;">
                        <li>A4 Paper (Ream) × 5</li>
                        <li>Pens (Box of 50) × 2</li>
                        <li>File Folders × 20</li>
                    </ul>
                </div>

                <div class="form-section-title">Fulfillment Details</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Fulfillment Status</label>
                        <select class="form-control">
                            <option>Fully Fulfilled</option>
                            <option>Partially Fulfilled</option>
                            <option>Out of Stock</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Fulfillment Date</label>
                        <input type="date" class="form-control" value="${new Date().toISOString().split('T')[0]}">
                    </div>
                </div>

                <div class="form-group">
                    <label>Items Issued:</label>
                    <div style="padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #f7fafc;">
                            <span style="flex: 1;">Item</span>
                            <span style="width: 100px; text-align: center;">Requested</span>
                            <span style="width: 100px; text-align: center;">Issued</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="flex: 1;">A4 Paper (Ream)</span>
                            <span style="width: 100px; text-align: center;">5</span>
                            <input type="number" value="5" style="width: 80px; text-align: center; padding: 4px; border: 1px solid #cbd5e0; border-radius: 4px; margin: 0 auto;">
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="flex: 1;">Pens (Box of 50)</span>
                            <span style="width: 100px; text-align: center;">2</span>
                            <input type="number" value="2" style="width: 80px; text-align: center; padding: 4px; border: 1px solid #cbd5e0; border-radius: 4px; margin: 0 auto;">
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="flex: 1;">File Folders</span>
                            <span style="width: 100px; text-align: center;">20</span>
                            <input type="number" value="20" style="width: 80px; text-align: center; padding: 4px; border: 1px solid #cbd5e0; border-radius: 4px; margin: 0 auto;">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Remarks</label>
                    <textarea class="form-control" rows="2" placeholder="Any notes about the fulfillment..."></textarea>
                </div>

                <div class="form-group">
                    <label>Handover Signature/Acknowledgment</label>
                    <div class="file-upload-area" onclick="document.getElementById('handoverSign').click()">
                        <input type="file" id="handoverSign" accept=".pdf,.jpg,.png">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload signed handover document (optional)</div>
                        </div>
                    </div>
                </div>
            `;
            showUniversalModal('Fulfill Stationery Request', bodyHTML);
        }

        // ============================================
        // ADMIN EXPENSES MODAL
        // ============================================

        function showSubmitAdminExpenseForm() {
            const bodyHTML = `
                <div class="form-info">Submit administrative expense for reimbursement</div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Expense Category</label>
                        <select class="form-control">
                            <option>Select Category</option>
                            <option>Office Supplies</option>
                            <option>Utilities (Electricity, Water)</option>
                            <option>Maintenance & Repairs</option>
                            <option>Rent</option>
                            <option>Internet & Phone</option>
                            <option>Courier & Postage</option>
                            <option>Printing & Photocopying</option>
                            <option>Pantry Expenses</option>
                            <option>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="required">Expense Date</label>
                        <input type="date" class="form-control">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="required">Amount</label>
                        <input type="number" class="form-control" placeholder="₹ Expense amount">
                    </div>
                    <div class="form-group">
                        <label class="required">Vendor/Supplier</label>
                        <input type="text" class="form-control" placeholder="Enter vendor name">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Invoice/Bill Number</label>
                        <input type="text" class="form-control" placeholder="Enter invoice number">
                    </div>
                    <div class="form-group">
                        <label class="required">Payment Mode</label>
                        <select class="form-control">
                            <option>Cash</option>
                            <option>UPI</option>
                            <option>Credit Card</option>
                            <option>Debit Card</option>
                            <option>Cheque</option>
                            <option>Bank Transfer</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="required">Description</label>
                    <textarea class="form-control" rows="3" placeholder="Describe the expense and purpose..."></textarea>
                </div>

                <div class="form-group">
                    <label class="required">Upload Bills/Receipts</label>
                    <div class="file-upload-area" onclick="document.getElementById('adminExpenseBills').click()">
                        <input type="file" id="adminExpenseBills" multiple accept=".pdf,.jpg,.png">
                        <div style="color: #718096;">
                            <div style="font-size: 24px; margin-bottom: 8px;">↑</div>
                            <div>Upload invoice, bill, or receipt</div>
                            <div style="font-size: 12px; margin-top: 8px;">Accepted formats: PDF, JPG, PNG</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Additional Notes</label>
                    <textarea class="form-control" rows="2" placeholder="Any additional information..."></textarea>
                </div>

                <div style="margin-top: 16px; padding: 12px; background: #FFF3CD; border-left: 4px solid #FFC107; font-size: 13px;">
                    <strong>Note:</strong> All expense submissions require supporting documents (bills/receipts) for approval
                </div>
            `;
            showUniversalModal('Submit Admin Expense', bodyHTML);
        }

        // ============================================
        // ADDITIONAL MODAL STUBS FOR REMAINING ACTIONS
        // ============================================

        function showLeaveCalendar() {
            const bodyHTML = `
                <div class="form-info">View team leave schedule and plan accordingly</div>
                <div style="padding: 20px; text-align: center; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📅</div>
                    <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Leave Calendar</div>
                    <div style="font-size: 14px; color: #718096;">Team leave schedule, public holidays, and department-wise view</div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Leave Calendar', bodyHTML, footerHTML);
        }

        function showPerformanceDashboard() {
            const bodyHTML = `
                <div class="form-info">Performance analytics and metrics dashboard</div>
                <div style="padding: 20px; text-align: center; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📊</div>
                    <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Performance Dashboard</div>
                    <div style="font-size: 14px; color: #718096;">Team metrics, KPI achievement, review completion, top performers</div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Performance Dashboard', bodyHTML, footerHTML);
        }

        function showUpdateProfileForm() {
            const bodyHTML = `
                <div class="form-info">Update your personal information</div>
                <div class="form-group">
                    <label>Contact Number</label>
                    <input type="tel" class="form-control" placeholder="+91-XXXXXXXXXX">
                </div>
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" class="form-control" placeholder="email@fwwbindia.org">
                </div>
                <div class="form-group">
                    <label>Current Address</label>
                    <textarea class="form-control" rows="3" placeholder="Enter current address"></textarea>
                </div>
                <div class="form-group">
                    <label>Emergency Contact Name</label>
                    <input type="text" class="form-control" placeholder="Enter name">
                </div>
                <div class="form-group">
                    <label>Emergency Contact Number</label>
                    <input type="tel" class="form-control" placeholder="+91-XXXXXXXXXX">
                </div>
            `;
            showUniversalModal('Update Profile', bodyHTML);
        }

        function showAttendanceDetailsForm() {
            const bodyHTML = `
                <div class="form-info">View detailed attendance records</div>
                <div style="padding: 20px; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-weight: 500; margin-bottom: 12px;">Monthly Summary</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                        <div>
                            <div style="font-size: 12px; color: #718096;">Total Days</div>
                            <div style="font-size: 20px; font-weight: bold;">30</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #718096;">Present</div>
                            <div style="font-size: 20px; font-weight: bold; color: #48BB78;">28</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #718096;">Absent</div>
                            <div style="font-size: 20px; font-weight: bold; color: #E53E3E;">1</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #718096;">Leave</div>
                            <div style="font-size: 20px; font-weight: bold; color: #1BADE3;">1</div>
                        </div>
                    </div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Attendance Details', bodyHTML, footerHTML);
        }

        function showNotificationDetails(type) {
            const bodyHTML = `
                <div class="form-info">View all ${type} notifications</div>
                <div style="padding: 20px; text-align: center; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 16px;">🔔</div>
                    <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Notifications</div>
                    <div style="font-size: 14px; color: #718096;">View all system notifications and alerts</div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Notifications', bodyHTML, footerHTML);
        }

        // Stub functions for various table actions
        function viewEmployeeDetails(empId) {
            alert('View Employee Details\n\nEmployee ID: ' + empId + '\n\nIn production, this will show complete employee profile with:\n● Personal information\n● Employment details\n● Documents\n● Attendance history\n● Leave balance\n● Performance records');
        }

        function editEmployee(empId) {
            showAddEmployeeForm(); // Reuse the Add Employee form for editing
        }

        function viewCandidateDetails(position) {
            showViewApplicationsForm(); // Reuse the View Applications form
        }

        function viewAttendanceDetails(empId) {
            showAttendanceDetailsForm();
        }

        function markAttendance(empId) {
            showManualAttendanceForm();
        }

        function approveLeave(empId) {
            alert('Leave Approved!\n\nEmployee ID: ' + empId + '\n\nNotification sent to employee.');
            setTimeout(() => location.reload(), 1000);
        }

        function rejectLeave(empId) {
            const reason = prompt('Enter rejection reason:');
            if (reason) {
                alert('Leave Rejected\n\nEmployee ID: ' + empId + '\nReason: ' + reason + '\n\nNotification sent.');
                setTimeout(() => location.reload(), 1000);
            }
        }

        function conductReview(empId) {
            alert('Conduct Review\n\nEmployee ID: ' + empId + '\n\nOpening performance review form...');
        }

        function sendReminder(empId, type) {
            alert('Reminder Sent!\n\nEmployee ID: ' + empId + '\nType: ' + type);
        }

        function processResignation(empId) {
            showProcessResignationForm();
        }

        function scheduleExitInterview(empId) {
            showExitInterviewForm();
        }

        function generatePayrollChallan(type) {
            alert('Generating ' + type + ' Challan\n\nProcessing statutory payment...');
        }

        function viewPayrollReceipt(type) {
            alert('Viewing ' + type + ' Receipt\n\nDisplaying payment confirmation...');
        }

        function downloadPayslip(month) {
            alert('Downloading Payslip\n\nMonth: ' + month + '\n\nPDF will download automatically.');
        }

        function viewForm16() {
            alert('Form 16 - TDS Certificate\n\nAnnual tax deduction certificate\n\nPDF will download automatically.');
        }

        function exportToExcel(type) {
            alert('Exporting to Excel\n\nData type: ' + type + '\n\nFile will download automatically.');
        }

        function generateReport(type) {
            alert('Generating Report\n\nReport type: ' + type + '\n\nProcessing...');
        }

        // Additional modal stubs
        function showRenewalDashboard() {
            const bodyHTML = `
                <div class="form-info">Track insurance policy renewals and manage expiring policies</div>
                <div style="padding: 20px; text-align: center; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📋</div>
                    <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Renewal Dashboard</div>
                    <div style="font-size: 14px; color: #718096;">Policies expiring soon, renewal quotes, comparison analysis</div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Renewal Dashboard', bodyHTML, footerHTML);
        }

        function showTravelCalendar() {
            const bodyHTML = `
                <div class="form-info">View all travel schedules and bookings</div>
                <div style="padding: 20px; text-align: center; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📅</div>
                    <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Travel Calendar</div>
                    <div style="font-size: 14px; color: #718096;">Team travel schedule and upcoming trips</div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Travel Calendar', bodyHTML, footerHTML);
        }

        function showStockInventory() {
            const bodyHTML = `
                <div class="form-info">View current stationery stock levels</div>
                <div style="padding: 20px; text-align: center; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 16px;">📦</div>
                    <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Stock Inventory</div>
                    <div style="font-size: 14px; color: #718096;">Current stock, minimum levels, reorder alerts</div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Stock Inventory', bodyHTML, footerHTML);
        }

        function showBudgetDashboard() {
            const bodyHTML = `
                <div class="form-info">Compare budgeted vs actual administrative expenses</div>
                <div style="padding: 20px; text-align: center; background: #F7FAFC; border-radius: 8px; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 16px;">💰</div>
                    <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Budget Dashboard</div>
                    <div style="font-size: 14px; color: #718096;">Budget utilization, variance analysis, spending trends</div>
                </div>
            `;
            const footerHTML = `<button class="btn btn-secondary" onclick="closeUniversalModal()">Close</button>`;
            showUniversalModal('Budget Dashboard', bodyHTML, footerHTML);
        }

        // Additional stub actions
        function viewPolicyDetails(policyId) {
            alert('View Policy Details\n\nPolicy ID: ' + policyId + '\n\nShowing complete policy information...');
        }

        function renewPolicy(policyId) {
            showRenewPolicyForm();
        }

        function viewAssetDetails(assetId) {
            alert('View Asset Details\n\nAsset ID: ' + assetId + '\n\nShowing complete asset information...');
        }

        function editAsset(assetId) {
            showAddAssetForm(); // Reuse Add Asset form for editing
        }

        function assignAsset(assetId) {
            showAssignAssetForm();
        }

        function downloadExpenseBills(expenseId) {
            alert('Downloading Bills\n\nExpense ID: ' + expenseId + '\n\nFiles will download automatically.');
        }
    </script>
</body>
</html>